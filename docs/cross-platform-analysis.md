# MD Viewer è·¨å¹³å°å…¼å®¹æ€§åˆ†ææŠ¥å‘Š

> **é¡¹ç›®ç‰ˆæœ¬**ï¼šv1.4.7
> **åˆ†ææ—¥æœŸ**ï¼š2026-02-07
> **åˆ†æèŒƒå›´**ï¼šmacOS / Windows / Linux ä¸‰å¹³å°
> **æ–‡æ¡£æ€§è´¨**ï¼šåªè¯»åˆ†æï¼Œä¸ä¿®æ”¹ä»£ç 
> **ç›®æ ‡è¯»è€…**ï¼šé¡¹ç›®å¼€å‘è€…

---

## æ‰§è¡Œæ‘˜è¦

MD Viewer v1.4.7 å­˜åœ¨ **18 ä¸ªè·¨å¹³å°ä»£ç å…¼å®¹æ€§é—®é¢˜**å’Œ **7 ä¸ª OS ç‰ˆæœ¬ç›¸å…³é—®é¢˜**ã€‚

æ ¸å¿ƒæ ¹å› ï¼šé¡¹ç›®ä»¥ macOS ä¸ºä¸»è¦å¼€å‘å¹³å°ï¼Œå¯¼è‡´ UI å¸ƒå±€ã€å¿«æ·é”®ã€æ–‡æ¡ˆã€èµ„æºæ–‡ä»¶ç­‰æ–¹é¢å­˜åœ¨ macOS ç¡¬ç¼–ç ã€‚

- **P0 ä¸¥é‡é—®é¢˜ 6 ä¸ª**ï¼šçª—å£å¸ƒå±€å¼‚å¸¸ï¼ˆæ ‡é¢˜æ  + CSS 80px ç¡¬ç¼–ç ï¼‰ã€å…¨å±å¿«æ·é”®å¤±æ•ˆã€åº”ç”¨å›¾æ ‡ç¼ºå¤±
- **P1 ä¸­ç­‰é—®é¢˜ 9 ä¸ª**ï¼šUI æ–‡æ¡ˆç¡¬ç¼–ç  Finder/âŒ˜ ç¬¦å·ã€å‰ªè´´æ¿å…¼å®¹ã€è·¯å¾„åˆ†éš”ç¬¦
- **P2 æ¬¡è¦é—®é¢˜ 3 ä¸ª**ï¼šåºŸå¼ƒ APIã€ä»£ç å†—ä½™ã€é”™è¯¯å¤„ç†

**å¿«é€Ÿé˜…è¯»è·¯å¾„**ï¼š
- äº†è§£å…¨è²Œ â†’ ç¬¬ 1 ç« ï¼ˆçŸ©é˜µè¡¨ï¼‰
- ç«‹å³ä¿®å¤ â†’ ç¬¬ 8 ç« ï¼ˆæŒ‰æ‰¹æ¬¡æ‰§è¡Œï¼‰â†’ å¯¹åº”çš„ç¬¬ 4-5 ç« è¯¦è§£
- æ·±å…¥åˆ†æ â†’ å…¨æ–‡é¡ºåºé˜…è¯»

---

## ç›®å½•

1. [æ€»è§ˆï¼šä¸‰å¹³å°å…¼å®¹æ€§çŸ©é˜µ](#1-æ€»è§ˆä¸‰å¹³å°å…¼å®¹æ€§çŸ©é˜µ)ï¼ˆ22 é¡¹åŠŸèƒ½å¯¹æ¯”ï¼‰
2. [çª—å£å¸ƒå±€å·®å¼‚ï¼ˆASCII çº¿æ¡†å›¾ï¼‰](#2-çª—å£å¸ƒå±€å·®å¼‚ascii-çº¿æ¡†å›¾)
3. [é—®é¢˜æ ¹å› åˆ†æï¼ˆé±¼éª¨å›¾ï¼‰](#3-é—®é¢˜æ ¹å› åˆ†æé±¼éª¨å›¾)
4. [P0 ä¸¥é‡é—®é¢˜è¯¦è§£](#4-p0-ä¸¥é‡é—®é¢˜è¯¦è§£)ï¼ˆ6 ä¸ªé—®é¢˜ï¼š4.1-4.6ï¼‰
5. [P1/P2 é—®é¢˜è¯¦è§£](#5-p1-ä¸­ç­‰é—®é¢˜è¯¦è§£)ï¼ˆ9 ä¸ª P1 + 3 ä¸ª P2ï¼‰
6. [å·²æ­£ç¡®å¤„ç†çš„è·¨å¹³å°é€»è¾‘](#6-å·²æ­£ç¡®å¤„ç†çš„è·¨å¹³å°é€»è¾‘)
7. [ä¿®å¤æ–¹æ¡ˆæ±‡æ€»](#7-ä¿®å¤æ–¹æ¡ˆæ±‡æ€»)ï¼ˆ18 ä¸ªé—®é¢˜å®Œæ•´è¡¨æ ¼ï¼‰
8. [ä¼˜å…ˆçº§æ’åºä¸å®æ–½å»ºè®®](#8-ä¼˜å…ˆçº§æ’åºä¸å®æ–½å»ºè®®)ï¼ˆ5 æ‰¹æ¬¡å®æ–½è®¡åˆ’ï¼‰
9. [æ“ä½œç³»ç»Ÿç‰ˆæœ¬å…¼å®¹æ€§åˆ†æ](#9-æ“ä½œç³»ç»Ÿç‰ˆæœ¬å…¼å®¹æ€§åˆ†æ)ï¼ˆmacOS/Windows/Linux ç‰ˆæœ¬å·®å¼‚ + 7 ä¸ª V ç³»åˆ—é—®é¢˜ï¼‰
10. [é™„å½•ï¼šå¹³å°æ£€æµ‹é€ŸæŸ¥è¡¨](#é™„å½•å¹³å°æ£€æµ‹é€ŸæŸ¥è¡¨)

---

## 1. æ€»è§ˆï¼šä¸‰å¹³å°å…¼å®¹æ€§çŸ©é˜µ

| # | åŠŸèƒ½æ¨¡å— | macOS | Windows | Linux | çŠ¶æ€ |
|---|---------|:-----:|:-------:|:-----:|------|
| 1 | çª—å£æ ‡é¢˜æ  | âœ… hiddenInset | âš ï¸ é»˜è®¤æ ‡é¢˜æ  | âš ï¸ é»˜è®¤æ ‡é¢˜æ  | ğŸ”´ P0 |
| 2 | NavigationBar padding | âœ… çº¢ç»¿ç¯é€‚é… | âŒ å·¦ä¾§ 80px ç©ºç™½ | âŒ å·¦ä¾§ 80px ç©ºç™½ | ğŸ”´ P0 |
| 3 | CSS æ‹–æ‹½åŒºåŸŸ | âœ… çº¢ç»¿ç¯é€‚é… | âŒ å·¦ä¾§ 80px ç©ºç™½ | âŒ å·¦ä¾§ 80px ç©ºç™½ | ğŸ”´ P0 |
| 4 | å…¨å±å¿«æ·é”® | âœ… Cmd+F11 | âŒ æ— å“åº” | âŒ æ— å“åº” | ğŸ”´ P0 |
| 5 | åº”ç”¨å›¾æ ‡ | âœ… icon.icns | âŒ ç¼ºå°‘ icon.ico | âŒ ç¼ºå°‘ icon.png | ğŸ”´ P0 |
| 6 | Linux å³é”®èœå•å›¾æ ‡ | N/A | N/A | âŒ icon.png ä¸å­˜åœ¨ | ğŸ”´ P0 |
| 7 | è®¾ç½®é¢æ¿æ–‡æ¡ˆ | âœ… Finder | âš ï¸ éƒ¨åˆ†ç¡¬ç¼–ç  Finder | âš ï¸ éƒ¨åˆ†ç¡¬ç¼–ç  Finder | âš ï¸ P1 |
| 8 | æ ‡ç­¾é¡µå³é”®èœå•æ–‡æ¡ˆ | âœ… Finder | âŒ ä»æ˜¾ç¤º Finder | âŒ ä»æ˜¾ç¤º Finder | âš ï¸ P1 |
| 9 | å…¨å±é€€å‡ºæç¤º | âš ï¸ æ–‡æ¡ˆé”™è¯¯(Cmd+Ctrl+F) | âŒ æ˜¾ç¤º Cmd | âŒ æ˜¾ç¤º Cmd | âš ï¸ P1 |
| 10 | æœç´¢æ å¿«æ·é”®æç¤º | âœ… âŒ˜K | âŒ æ˜¾ç¤º âŒ˜K | âŒ æ˜¾ç¤º âŒ˜K | âš ï¸ P1 |
| 11 | ç½®é¡¶æŒ‰é’® title | âœ… âŒ˜âŒ¥T | âŒ æ˜¾ç¤º âŒ˜âŒ¥T | âŒ æ˜¾ç¤º âŒ˜âŒ¥T | âš ï¸ P1 |
| 12 | ç³»ç»Ÿè®¾ç½®æ‰“å¼€ | âœ… x-apple.systempreferences | âœ… ms-settings | âŒ ä¸æ”¯æŒ | âš ï¸ P1 |
| 13 | å‰ªè´´æ¿è¯»å– | âœ… NSFilenamesPboardType | âœ… FileNameW | âš ï¸ text/uri-list | âš ï¸ P1 |
| 14 | å‰ªè´´æ¿å†™å…¥ | âœ… NSFilenamesPboardType | âš ï¸ ä»…æ–‡æœ¬æ ¼å¼ | âš ï¸ file:// URI | âš ï¸ P1 |
| 15 | è·¯å¾„åˆ†éš”ç¬¦ï¼ˆNavigationBarï¼‰ | âœ… `/` | âŒ ç”¨ `/` åˆ†å‰² `\` è·¯å¾„ | âœ… `/` | âš ï¸ P1 |
| 16 | navigator.platformï¼ˆå·²åºŸå¼ƒï¼‰ | âš ï¸ å¯ç”¨ | âš ï¸ å¯ç”¨ | âš ï¸ å¯ç”¨ | ğŸ”µ P2 |
| 17 | open-file/open-url äº‹ä»¶ | âœ… macOS ä¸“å± | âš ï¸ éœ€å‘½ä»¤è¡Œå‚æ•° | âš ï¸ éœ€å‘½ä»¤è¡Œå‚æ•° | ğŸ”µ P2 |
| 18 | shell.trashItem | âœ… åŸç”Ÿæ”¯æŒ | âœ… åŸç”Ÿæ”¯æŒ | âš ï¸ ä¾èµ– gvfs-trash | ğŸ”µ P2 |
| 19 | å¿«æ·é”®ï¼ˆä¸»è¿›ç¨‹ï¼‰ | âœ… CmdOrCtrl | âœ… CmdOrCtrl | âœ… CmdOrCtrl | âœ… OK |
| 20 | å­—ä½“æ ˆ | âœ… SF Pro | âœ… Segoe UI | âœ… ç³»ç»Ÿå­—ä½“ | âœ… OK |
| 21 | æ–‡ä»¶è·¯å¾„å¤„ç† | âœ… path.join | âœ… path.join | âœ… path.join | âœ… OK |
| 22 | æ–‡ä»¶æ ‘å³é”®èœå•æ–‡æ¡ˆ | âœ… Finder | âœ… èµ„æºç®¡ç†å™¨ | âœ… æ–‡ä»¶ç®¡ç†å™¨ | âœ… OK |

**ç»Ÿè®¡**ï¼šğŸ”´ P0 Ã— 6 | âš ï¸ P1 Ã— 9 | ğŸ”µ P2 Ã— 3 | âœ… OK Ã— 4

---

## 2. çª—å£å¸ƒå±€å·®å¼‚ï¼ˆASCII çº¿æ¡†å›¾ï¼‰

### macOSï¼ˆå½“å‰å®ç°ï¼Œæ­£å¸¸ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â— â— â—  â”†          æ‹–æ‹½åŒºåŸŸï¼ˆ-webkit-app-region: dragï¼‰â”‚
â”‚ çº¢ç»¿ç¯  â”†  NavigationBarï¼ˆLogo + è·¯å¾„ + æœç´¢ + è®¾ç½®ï¼‰  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TabBarï¼ˆæ ‡ç­¾æ ï¼‰                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         â”‚                           â”‚               â”‚
â”‚ Sidebar â”‚    ContentArea            â”‚ BookmarkPanel â”‚
â”‚ æ–‡ä»¶æ ‘   â”‚    Markdown é¢„è§ˆ           â”‚ ä¹¦ç­¾é¢æ¿       â”‚
â”‚         â”‚                           â”‚               â”‚
â”‚         â”‚                           â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ StatusBar                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ ‡é¢˜æ ï¼štitleBarStyle: 'hiddenInset'
çº¢ç»¿ç¯ï¼štrafficLightPosition: { x: 15, y: 10 }
æ‹–æ‹½åŒºåŸŸï¼šleft: 80pxï¼ˆè·³è¿‡çº¢ç»¿ç¯ï¼‰
```

### Windowsï¼ˆå½“å‰å®ç°ï¼Œæœ‰é—®é¢˜ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å›¾æ ‡] MD Viewer              [â”€] [â–¡] [Ã—]           â”‚  â† ç³»ç»Ÿé»˜è®¤æ ‡é¢˜æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–ˆâ–ˆâ–ˆâ–ˆ  â”†          æ‹–æ‹½åŒºåŸŸï¼ˆè¢«æ ‡é¢˜æ é®æŒ¡ï¼Œæ— æ•ˆï¼‰         â”‚
â”‚ 80px  â”†  NavigationBarï¼ˆLogo + è·¯å¾„ + æœç´¢ + è®¾ç½®ï¼‰  â”‚  â† left:80px ç©ºç™½
â”‚ ç©ºç™½   â”†                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TabBarï¼ˆæ ‡ç­¾æ ï¼‰                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         â”‚                           â”‚               â”‚
â”‚ Sidebar â”‚    ContentArea            â”‚ BookmarkPanel â”‚
â”‚         â”‚                           â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ StatusBar                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é—®é¢˜ï¼š
1. ç³»ç»Ÿæ ‡é¢˜æ  + è‡ªå®šä¹‰å¯¼èˆªæ  = åŒå±‚æ ‡é¢˜ï¼Œæµªè´¹å‚ç›´ç©ºé—´
2. left: 80px åœ¨æ²¡æœ‰çº¢ç»¿ç¯çš„æƒ…å†µä¸‹é€ æˆå·¦ä¾§ç©ºç™½
3. -webkit-app-region: drag è¢«ç³»ç»Ÿæ ‡é¢˜æ è¦†ç›–
```

### Linuxï¼ˆå½“å‰å®ç°ï¼Œæœ‰é—®é¢˜ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å›¾æ ‡] MD Viewer                          [â”€][â–¡][Ã—] â”‚  â† ç³»ç»Ÿæ ‡é¢˜æ ï¼ˆæ ·å¼å›  DE è€Œå¼‚ï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–ˆâ–ˆâ–ˆâ–ˆ  â”†          æ‹–æ‹½åŒºåŸŸï¼ˆè¢«æ ‡é¢˜æ é®æŒ¡ï¼Œæ— æ•ˆï¼‰         â”‚
â”‚ 80px  â”†  NavigationBarï¼ˆLogo + è·¯å¾„ + æœç´¢ + è®¾ç½®ï¼‰  â”‚  â† left:80px ç©ºç™½
â”‚ ç©ºç™½   â”†                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TabBarï¼ˆæ ‡ç­¾æ ï¼‰                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         â”‚                           â”‚               â”‚
â”‚ Sidebar â”‚    ContentArea            â”‚ BookmarkPanel â”‚
â”‚         â”‚                           â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ StatusBar                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é—®é¢˜ï¼š
1. ä¸ Windows ç›¸åŒçš„åŒå±‚æ ‡é¢˜ + ç©ºç™½é—®é¢˜
2. ä¸åŒæ¡Œé¢ç¯å¢ƒï¼ˆGNOME/KDE/XFCEï¼‰æ ‡é¢˜æ é«˜åº¦ä¸ä¸€è‡´
3. æŸäº› Wayland åˆæˆå™¨ä¸‹ -webkit-app-region å¯èƒ½å¤±æ•ˆ
4. ç¼ºå°‘ icon.pngï¼ŒAppImage/deb åŒ…æ— åº”ç”¨å›¾æ ‡
```

### ä¿®å¤åçš„ç†æƒ³å¸ƒå±€ï¼ˆWindows / Linuxï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NavigationBarï¼ˆLogo + è·¯å¾„ + æœç´¢ + è®¾ç½®ï¼‰  [â”€][â–¡][Ã—] â”‚  â† æ— ç³»ç»Ÿæ ‡é¢˜æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â† æˆ–ä¿ç•™ç³»ç»Ÿæ ‡é¢˜æ 
â”‚ TabBarï¼ˆæ ‡ç­¾æ ï¼‰                                      â”‚     ä½†å»æ‰ 80px ç©ºç™½
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         â”‚                           â”‚               â”‚
â”‚ Sidebar â”‚    ContentArea            â”‚ BookmarkPanel â”‚
â”‚         â”‚                           â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ StatusBar                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. é—®é¢˜æ ¹å› åˆ†æï¼ˆé±¼éª¨å›¾ï¼‰

```
                              è·¨å¹³å°å…¼å®¹æ€§é—®é¢˜
                                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              â”‚               â”‚               â”‚              â”‚
    â–¼              â–¼               â–¼               â–¼              â–¼
 â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚çª—å£UIâ”‚    â”‚ è¾“å…¥ç³»ç»Ÿ  â”‚   â”‚ æ‰“åŒ…èµ„æº  â”‚   â”‚ å¹³å°API  â”‚   â”‚ æ–‡æ¡ˆå›½é™…åŒ–  â”‚
 â””â”€â”€â”¬â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚             â”‚              â”‚               â”‚                â”‚
    â”œâ”€titleBar    â”œâ”€metaKey      â”œâ”€ç¼º icon.ico   â”œâ”€clipboard      â”œâ”€è®¾ç½®é¢æ¿
    â”‚ Styleä»…     â”‚ ç¡¬ç¼–ç        â”‚ (Windows)     â”‚ Linuxè¯»å–      â”‚ ç¡¬ç¼–ç 
    â”‚ macOSç”Ÿæ•ˆ   â”‚ åªåŒ¹é…Cmd    â”‚               â”‚ å¯é æ€§ä½       â”‚ "Finder"
    â”‚             â”‚              â”œâ”€ç¼º icon.png   â”‚                â”‚
    â”œâ”€trafficLi   â”œâ”€F11å¿«æ·é”®   â”‚ (Linux)       â”œâ”€openSettings   â”œâ”€æ ‡ç­¾é¡µ
    â”‚ ghtæ— æ„ä¹‰   â”‚ Winæœ‰ç³»ç»Ÿ    â”‚               â”‚ Linuxæ— å®ç°    â”‚ å³é”®èœå•
    â”‚ (Win/Lin)   â”‚ å†²çª        â”œâ”€Linuxå³é”®     â”‚                â”‚ ç¡¬ç¼–ç 
    â”‚             â”‚              â”‚ èœå•å¼•ç”¨      â”œâ”€trashItem     â”‚ "Finder"
    â”œâ”€NavBar      â”‚              â”‚ ä¸å­˜åœ¨çš„      â”‚ Linuxä¾èµ–     â”‚
    â”‚ padding     â”‚              â”‚ icon.png      â”‚ gvfs-trash    â”œâ”€å…¨å±æç¤º
    â”‚ 80pxç¡¬ç¼–ç   â”‚              â”‚               â”‚                â”‚ ç¡¬ç¼–ç Cmd
    â”‚             â”‚              â”‚               â”œâ”€open-file     â”‚
    â”œâ”€æ‹–æ‹½åŒºåŸŸ    â”‚              â”‚               â”‚ macOSä¸“å±     â”œâ”€æœç´¢æ 
    â”‚ left:80px   â”‚              â”‚               â”‚ äº‹ä»¶          â”‚ ç¡¬ç¼–ç âŒ˜K
    â”‚ ç¡¬ç¼–ç       â”‚              â”‚               â”‚                â”‚
    â”‚             â”‚              â”‚               â”œâ”€è·¯å¾„åˆ†éš”ç¬¦    â”œâ”€ç½®é¡¶æŒ‰é’®
    â”‚             â”‚              â”‚               â”‚ ç”¨/åˆ†å‰²       â”‚ ç¡¬ç¼–ç âŒ˜âŒ¥T
    â”‚             â”‚              â”‚               â”‚ Winè·¯å¾„       â”‚
```

### æ ¹å› æ€»ç»“

| æ ¹å› ç±»åˆ« | æ ¸å¿ƒåŸå›  | å½±å“èŒƒå›´ | é—®é¢˜æ•°é‡ |
|---------|---------|---------|:-------:|
| **macOS ä¼˜å…ˆå¼€å‘** | å¼€å‘ç¯å¢ƒä¸º macOSï¼ŒAPI å’Œ UI ä»¥ macOS ä¸ºåŸºå‡† | çª—å£ã€CSSã€å¿«æ·é”® | 5 |
| **æ–‡æ¡ˆç¡¬ç¼–ç ** | UI æ–‡æ¡ˆç›´æ¥å†™æ­» macOS æœ¯è¯­ï¼ˆFinderã€âŒ˜ ç­‰ï¼‰ | è®¾ç½®é¢æ¿ã€æç¤ºã€æŒ‰é’® | 6 |
| **å¹³å°æ£€æµ‹ä¸å®Œæ•´** | éƒ¨åˆ†ä»£ç åªæ£€æŸ¥ `darwin`ï¼Œç¼ºå°‘ `win32`/`linux` åˆ†æ”¯ | å…¨å±ã€ç³»ç»Ÿè®¾ç½®ã€å‰ªè´´æ¿ | 4 |
| **èµ„æºæ–‡ä»¶ç¼ºå¤±** | åªç”Ÿæˆäº† macOS æ ¼å¼å›¾æ ‡ | æ‰“åŒ…äº§ç‰©ã€Linux å³é”®èœå• | 3 |

---

## 4. P0 ä¸¥é‡é—®é¢˜è¯¦è§£

### 4.1 çª—å£æ ‡é¢˜æ é…ç½® macOS ä¸“å±

**æ–‡ä»¶**ï¼š`src/main/index.ts:69-70`

**é—®é¢˜ä»£ç **ï¼š

```typescript
mainWindow = new BrowserWindow({
  // ...
  titleBarStyle: 'hiddenInset',        // â† macOS ä¸“å±æ•ˆæœ
  trafficLightPosition: { x: 15, y: 10 }, // â† macOS ä¸“å±å±æ€§
  // ...
})
```

**å„å¹³å°è¡¨ç°**ï¼š

| å¹³å° | `titleBarStyle: 'hiddenInset'` æ•ˆæœ |
|------|-------------------------------------|
| macOS | âœ… éšè—æ ‡é¢˜æ ï¼Œå†…åµŒçº¢ç»¿ç¯æŒ‰é’®ï¼Œå†…å®¹åŒºåŸŸå»¶ä¼¸åˆ°æ ‡é¢˜æ  |
| Windows | âš ï¸ éšè—æ ‡é¢˜æ æ–‡å­—ï¼Œä½†ä¿ç•™çª—å£æ§åˆ¶æŒ‰é’®ï¼ˆæœ€å°åŒ–/æœ€å¤§åŒ–/å…³é—­ï¼‰ï¼Œæ•ˆæœä¸ä¸€è‡´ |
| Linux | âš ï¸ è¡Œä¸ºå–å†³äºçª—å£ç®¡ç†å™¨ï¼ŒGNOME ä¸‹å¯èƒ½å®Œå…¨éšè—æ ‡é¢˜æ ï¼ŒKDE ä¸‹å¯èƒ½ä¿ç•™ |

**å½±å“**ï¼š
- Windows ä¸Šå‡ºç°"åŠéšè—"æ ‡é¢˜æ ï¼Œè§†è§‰ä¸åè°ƒ
- Linux ä¸Šè¡Œä¸ºä¸å¯é¢„æµ‹ï¼Œä¸åŒæ¡Œé¢ç¯å¢ƒè¡¨ç°ä¸åŒ
- `trafficLightPosition` åœ¨é macOS å¹³å°è¢«å¿½ç•¥ï¼ˆæ— å‰¯ä½œç”¨ä½†ä»£ç å†—ä½™ï¼‰

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```typescript
// æ–¹æ¡ˆ Aï¼šå¹³å°æ¡ä»¶é…ç½®ï¼ˆæ¨èï¼‰
const windowConfig: BrowserWindowConstructorOptions = {
  width: savedBounds.width,
  height: savedBounds.height,
  // ...å…±äº«é…ç½®
}

if (process.platform === 'darwin') {
  windowConfig.titleBarStyle = 'hiddenInset'
  windowConfig.trafficLightPosition = { x: 15, y: 10 }
} else {
  // Windows/Linuxï¼šä½¿ç”¨é»˜è®¤æ ‡é¢˜æ ï¼Œæˆ–ä½¿ç”¨ frameless + è‡ªå®šä¹‰æ§åˆ¶æŒ‰é’®
  // é€‰é¡¹ 1ï¼šä¿ç•™ç³»ç»Ÿæ ‡é¢˜æ ï¼ˆç®€å•å®‰å…¨ï¼‰
  // ä¸è®¾ç½® titleBarStyleï¼Œä½¿ç”¨ç³»ç»Ÿé»˜è®¤

  // é€‰é¡¹ 2ï¼šæ— è¾¹æ¡† + è‡ªå®šä¹‰æŒ‰é’®ï¼ˆè§†è§‰ç»Ÿä¸€ä½†å·¥ä½œé‡å¤§ï¼‰
  // windowConfig.frame = false
  // éœ€è¦åœ¨æ¸²æŸ“è¿›ç¨‹å®ç°çª—å£æ§åˆ¶æŒ‰é’®
}

mainWindow = new BrowserWindow(windowConfig)
```

---

### 4.2 å…¨å±å¿«æ·é”®åªæ”¯æŒ macOS

**æ–‡ä»¶**ï¼š`src/renderer/src/App.tsx:92`

**é—®é¢˜ä»£ç **ï¼š

```typescript
const handleKeyDown = async (e: KeyboardEvent) => {
  // Cmd+F11 åˆ‡æ¢å…¨å±ï¼ˆmacOS é£æ ¼ï¼‰
  if (e.metaKey && e.key === 'F11') {  // â† åªæ£€æŸ¥ metaKey (Cmd)
    e.preventDefault()
    const currentFullScreen = await window.api.isFullScreen()
    setIsFullscreen(!currentFullScreen)
    await window.api.setFullScreen(!currentFullScreen)
  }
}
```

**å„å¹³å°è¡¨ç°**ï¼š

| å¹³å° | `e.metaKey` å¯¹åº”æŒ‰é”® | Cmd+F11 å¯ç”¨ï¼Ÿ |
|------|---------------------|---------------|
| macOS | âœ… Command é”® | âœ… æ­£å¸¸å·¥ä½œ |
| Windows | âŒ Windows é”®ï¼ˆä¼šæ‰“å¼€å¼€å§‹èœå•ï¼‰ | âŒ æ— æ³•è§¦å‘ |
| Linux | âŒ Super é”®ï¼ˆä¼šæ‰“å¼€åº”ç”¨å¯åŠ¨å™¨ï¼‰ | âŒ æ— æ³•è§¦å‘ |

**æ³¨æ„**ï¼š`shortcuts.ts` ä¸­çš„ä¸»è¿›ç¨‹å¿«æ·é”®å·²æ­£ç¡®ä½¿ç”¨ `cmdOrCtrl` åˆ¤æ–­ï¼Œä½† `App.tsx` ä¸­çš„æ¸²æŸ“è¿›ç¨‹å¿«æ·é”®é—æ¼äº†ã€‚

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

> **æ¶æ„è¯„å®¡ä¿®æ­£**ï¼šWindows/Linux ç”¨æˆ·çš„è‚Œè‚‰è®°å¿†æ˜¯ F11 å…¨å±ï¼ˆChromeã€VS Codeã€èµ„æºç®¡ç†å™¨å‡å¦‚æ­¤ï¼‰ã€‚Ctrl+F11 è¿åç”¨æˆ·é¢„æœŸã€‚macOS ç”¨ Cmd+F11 æ˜¯å› ä¸º F11 åœ¨ macOS ä¸Šæ˜¯"æ˜¾ç¤ºæ¡Œé¢"çš„ç³»ç»Ÿå¿«æ·é”®ã€‚
>
> **æ³¨æ„**ï¼šåŸä»£ç å·²æœ‰ ESC é€€å‡ºå…¨å±åŠŸèƒ½ï¼ˆç¬¬ 98-103 è¡Œï¼‰ï¼Œæ­¤å¤„åªéœ€ä¿®æ”¹ç¬¬ 92 è¡Œçš„å¿«æ·é”®æ£€æµ‹é€»è¾‘ã€‚
>
> **é¢å¤–é£é™©**ï¼šElectron çš„ BrowserWindow åœ¨ Windows/Linux ä¸Šå¯èƒ½å·²æœ‰ F11 çš„é»˜è®¤å…¨å±è¡Œä¸ºã€‚å¦‚æœæ¸²æŸ“è¿›ç¨‹ç›‘å¬å™¨ä¸ Electron é»˜è®¤è¡Œä¸ºå†²çªï¼Œå»ºè®®æ”¹ä¸ºåœ¨ä¸»è¿›ç¨‹çš„ `shortcuts.ts` ä¸­é€šè¿‡ `before-input-event` æ³¨å†Œï¼Œè€Œéåœ¨æ¸²æŸ“è¿›ç¨‹ç›‘å¬ keydownã€‚

```typescript
const handleKeyDown = async (e: KeyboardEvent) => {
  const isMac = window.api?.platform === 'darwin'

  // macOS: Cmd+F11ï¼ˆé¿å…ä¸ç³»ç»Ÿ"æ˜¾ç¤ºæ¡Œé¢"å†²çªï¼‰
  // Windows/Linux: F11ï¼ˆç¬¦åˆç”¨æˆ·ä¹ æƒ¯ï¼Œä¸ Chrome/VS Code ä¸€è‡´ï¼‰
  const isFullscreenToggle = isMac
    ? (e.metaKey && e.key === 'F11')
    : (e.key === 'F11' && !e.ctrlKey && !e.altKey && !e.shiftKey)

  if (isFullscreenToggle) {
    e.preventDefault()
    const currentFullScreen = await window.api.isFullScreen()
    setIsFullscreen(!currentFullScreen)
    await window.api.setFullScreen(!currentFullScreen)
  }
  // ESC é€€å‡ºå…¨å±ï¼ˆä¸‰å¹³å°é€šç”¨ï¼ŒåŸä»£ç å·²æœ‰æ­¤é€»è¾‘ï¼‰
}
```

---

### 4.3 æ‰“åŒ…é…ç½®ç¼ºå°‘ Windows/Linux å›¾æ ‡

**æ–‡ä»¶**ï¼š`package.json` build é…ç½®

**å½“å‰èµ„æºæ–‡ä»¶**ï¼š

```
resources/
â”œâ”€â”€ icon.icns          # âœ… macOS å›¾æ ‡ï¼ˆ302KBï¼‰
â”œâ”€â”€ icon.svg           # âœ… æº SVG æ–‡ä»¶
â””â”€â”€ icon.iconset/      # âœ… macOS iconsetï¼ˆå¤šåˆ†è¾¨ç‡ PNGï¼‰
    â”œâ”€â”€ icon_16x16.png
    â”œâ”€â”€ icon_16x16@2x.png
    â”œâ”€â”€ icon_32x32.png
    â”œâ”€â”€ icon_32x32@2x.png
    â”œâ”€â”€ icon_128x128.png
    â”œâ”€â”€ icon_128x128@2x.png
    â”œâ”€â”€ icon_256x256.png
    â”œâ”€â”€ icon_256x256@2x.png
    â”œâ”€â”€ icon_512x512.png
    â””â”€â”€ icon_512x512@2x.png
```

**ç¼ºå¤±æ–‡ä»¶**ï¼š

| å¹³å° | éœ€è¦çš„å›¾æ ‡æ ¼å¼ | å½“å‰çŠ¶æ€ |
|------|-------------|---------|
| Windows | `icon.ico`ï¼ˆå« 16/32/48/64/128/256pxï¼‰ | âŒ ç¼ºå¤± |
| Linux | `icon.png`ï¼ˆ256x256 æˆ– 512x512ï¼‰ | âš ï¸ iconset ä¸­æœ‰ä½†æœªåœ¨ build é…ç½®ä¸­å¼•ç”¨ |

**package.json é…ç½®é—®é¢˜**ï¼š

```json
{
  "build": {
    "mac": {
      "icon": "resources/icon.icns"  // âœ… å·²é…ç½®
    },
    "win": {
      // âŒ ç¼ºå°‘ "icon": "resources/icon.ico"
    },
    "linux": {
      // âŒ ç¼ºå°‘ "icon": "resources/icon.png"
    }
  }
}
```

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```bash
# æ­¥éª¤ 1ï¼šä» SVG ç”Ÿæˆ Windows ICO
# ä½¿ç”¨ ImageMagick æˆ–åœ¨çº¿å·¥å…·
convert resources/icon.svg -define icon:auto-resize=256,128,64,48,32,16 resources/icon.ico

# æ­¥éª¤ 2ï¼šå¤åˆ¶ PNG ç”¨äº Linuxï¼ˆå·²æœ‰ 512x512ï¼‰
cp resources/icon.iconset/icon_512x512.png resources/icon.png

# æ­¥éª¤ 3ï¼šæ›´æ–° package.json
```

```json
{
  "build": {
    "win": {
      "icon": "resources/icon.ico",
      "target": ["nsis", "zip"]
    },
    "linux": {
      "icon": "resources/icon.png",
      "target": ["AppImage", "deb"],
      "category": "Utility"  // æ³¨ï¼šæ­¤å­—æ®µå·²å­˜åœ¨äºå½“å‰é…ç½®ä¸­
    }
  }
}
```

---

### 4.4 NavigationBar padding ç¡¬ç¼–ç  macOS çº¢ç»¿ç¯ç©ºé—´

**æ–‡ä»¶**ï¼š`src/renderer/src/components/NavigationBar.css:11`

**é—®é¢˜ä»£ç **ï¼š

```css
.navigation-bar {
  /* ... */
  padding: 0 16px 0 80px; /* å·¦ä¾§ç•™å‡º macOS çº¢ç»¿ç¯æŒ‰é’®ç©ºé—´ */
}
```

**å„å¹³å°å½±å“**ï¼š

| å¹³å° | æ•ˆæœ |
|------|------|
| macOS | âœ… æ­£ç¡®é¿å¼€çº¢ç»¿ç¯æŒ‰é’® |
| Windows | âŒ å¯¼èˆªæ å·¦ä¾§ 80px ç©ºç™½ï¼ŒLogo å’Œå†…å®¹è¢«æ¨åˆ°å³è¾¹ |
| Linux | âŒ åŒ Windows |

**æ³¨æ„**ï¼šè¿™ä¸ªé—®é¢˜å’Œ 4.1 çš„ CSS `left: 80px` æ˜¯åŒä¸€ç±»é—®é¢˜ä½†åœ¨ä¸åŒæ–‡ä»¶ä¸­ï¼Œ`NavigationBar.css` çš„ padding å½±å“æ›´å¤§ï¼Œå› ä¸ºå®ƒç›´æ¥å½±å“å¯¼èˆªæ å†…å®¹çš„èµ·å§‹ä½ç½®ã€‚

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```css
.navigation-bar {
  padding: 0 16px; /* é»˜è®¤ï¼šWindows/Linux */
}

body[data-platform="darwin"] .navigation-bar {
  padding: 0 16px 0 80px; /* macOSï¼šç•™å‡ºçº¢ç»¿ç¯ç©ºé—´ */
}
```

---

### 4.5 Linux å³é”®èœå•å®‰è£…å¼•ç”¨ä¸å­˜åœ¨çš„ icon.png

**æ–‡ä»¶**ï¼š`src/main/contextMenuInstaller.ts:475-477`

**é—®é¢˜ä»£ç **ï¼š

```typescript
const iconPath = app.isPackaged
  ? path.join(process.resourcesPath, 'icon.png')
  : path.join(__dirname, '../../resources/icon.png')
```

**é—®é¢˜**ï¼š
- `resources/` ç›®å½•ä¸‹æ²¡æœ‰ `icon.png` æ–‡ä»¶ï¼ˆåªæœ‰ `icon.icns` å’Œ `icon.svg`ï¼‰
- Linux `.desktop` æ–‡ä»¶ä¸­ `Icon=${iconPath}` æŒ‡å‘ä¸å­˜åœ¨çš„æ–‡ä»¶
- å¯¼è‡´ Linux å³é”®èœå•å®‰è£…ååº”ç”¨å›¾æ ‡ç¼ºå¤±

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```bash
# ä» iconset å¤åˆ¶ä¸€ä¸ª PNG
cp resources/icon.iconset/icon_256x256.png resources/icon.png
```

åŒæ—¶ç¡®ä¿ `electron-builder` çš„ `extraResources` åŒ…å« `icon.png`ï¼š

```json
{
  "extraResources": [
    { "from": "resources/icon.png", "to": "icon.png" }
  ]
}
```

---

### 4.6 CSS æ‹–æ‹½åŒºåŸŸç¡¬ç¼–ç  macOS çº¢ç»¿ç¯ç©ºé—´

**æ–‡ä»¶**ï¼š`src/renderer/src/assets/main.css:126-132`

**é—®é¢˜ä»£ç **ï¼š

```css
.titlebar-drag-region {
  position: absolute;
  top: 0;
  left: 80px; /* ç•™å‡ºçº¢ç»¿ç¯æŒ‰é’®ç©ºé—´ */
  right: 0;
  height: 100%;
}
```

**å„å¹³å°å½±å“**ï¼š

| å¹³å° | çº¢ç»¿ç¯/çª—å£æŒ‰é’®ä½ç½® | `left: 80px` æ•ˆæœ |
|------|-------------------|-------------------|
| macOS | å·¦ä¸Šè§’ï¼ˆx:15, y:10ï¼‰ | âœ… æ­£ç¡®é¿å¼€çº¢ç»¿ç¯ |
| Windows | å³ä¸Šè§’ï¼ˆç³»ç»Ÿæ ‡é¢˜æ ï¼‰ | âŒ å·¦ä¾§ 80px ç©ºç™½æ— æ„ä¹‰ |
| Linux | å³ä¸Šè§’æˆ–å·¦ä¸Šè§’ï¼ˆå–å†³äºæ¡Œé¢ç¯å¢ƒï¼‰ | âŒ å¤§å¤šæ•°æƒ…å†µä¸‹ç©ºç™½æ— æ„ä¹‰ |

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

> **æ³¨æ„**ï¼šé»˜è®¤ CSS åº”è®¾ä¸º Windows/Linux çš„å€¼ï¼ˆ0pxï¼‰ï¼ŒmacOS çš„ 80px ä½œä¸ºè¦†ç›–ã€‚è¿™æ ·å³ä½¿ JS å¹³å°æ³¨å…¥æœ‰å»¶è¿Ÿï¼ŒWindows/Linux ç”¨æˆ·ä¹Ÿä¸ä¼šçœ‹åˆ°é—ªçƒï¼ˆFOUCï¼‰ã€‚

```css
/* é»˜è®¤ï¼šWindows/Linuxï¼ˆæ— çº¢ç»¿ç¯åç§»ï¼‰ */
:root {
  --titlebar-left-offset: 0px;
}

.titlebar-drag-region {
  position: absolute;
  top: 0;
  left: var(--titlebar-left-offset);
  right: 0;
  height: 100%;
}

/* macOS è¦†ç›– */
body[data-platform="darwin"] {
  --titlebar-left-offset: 80px;
}
```

---

## 5. P1 ä¸­ç­‰é—®é¢˜è¯¦è§£

### 5.1 å‰ªè´´æ¿ç®¡ç†å™¨ Linux æ”¯æŒä¸å®Œæ•´

**æ–‡ä»¶**ï¼š`src/main/clipboardManager.ts`

**å½“å‰å®ç°åˆ†æ**ï¼š

| åŠŸèƒ½ | macOS | Windows | Linux |
|------|:-----:|:-------:|:-----:|
| è¯»å–æ–‡ä»¶è·¯å¾„ | âœ… NSFilenamesPboardType + file:// | âœ… FileNameW | âš ï¸ ä»… text/uri-list |
| å†™å…¥æ–‡ä»¶è·¯å¾„ | âœ… NSFilenamesPboardType + file:// | âš ï¸ ä»…æ–‡æœ¬æ ¼å¼ | âš ï¸ ä»… file:// URI |
| æ£€æµ‹å‰ªè´´æ¿æ–‡ä»¶ | âœ… buffer æ£€æµ‹ | âœ… buffer æ£€æµ‹ | âš ï¸ æ–‡æœ¬åŒ¹é… |

**Linux é—®é¢˜è¯¦è§£**ï¼š

```typescript
// å½“å‰ Linux è¯»å–å®ç°ï¼ˆclipboardManager.ts:61-68ï¼‰
} else {
  // Linux: è¯»å– text/uri-list
  const text = clipboard.readText()
  if (text.includes('file://')) {
    rawPaths = text.split('\n')
      .filter(line => line.startsWith('file://'))
      .map(line => decodeURIComponent(line.replace('file://', '')))
  }
}
```

**é—®é¢˜**ï¼š
1. `clipboard.readText()` åœ¨ Linux ä¸Šè¯»å–çš„æ˜¯ `text/plain` MIME ç±»å‹ï¼Œè€Œé `text/uri-list`
2. Nautilus/Dolphin ç­‰æ–‡ä»¶ç®¡ç†å™¨å¤åˆ¶æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨ `x-special/gnome-copied-files` æˆ– `application/x-kde-cutselection` æ ¼å¼
3. å½“å‰å®ç°åªèƒ½è¯†åˆ«ç”¨æˆ·æ‰‹åŠ¨å¤åˆ¶çš„ `file://` æ–‡æœ¬ï¼Œæ— æ³•è¯†åˆ«æ–‡ä»¶ç®¡ç†å™¨çš„"å¤åˆ¶æ–‡ä»¶"æ“ä½œ

**Windows å†™å…¥é—®é¢˜**ï¼š

```typescript
// å½“å‰ Windows å†™å…¥å®ç°ï¼ˆclipboardManager.ts:122-126ï¼‰
} else if (platform === 'win32') {
  // Windows: ç®€åŒ–å®ç°ï¼Œåªå†™å…¥æ–‡æœ¬æ ¼å¼
  clipboard.writeText(validPaths.join('\n'))
  // â† èµ„æºç®¡ç†å™¨æ— æ³•è¯†åˆ«ä¸º"æ–‡ä»¶å¤åˆ¶"ï¼Œåªèƒ½ç²˜è´´ä¸ºæ–‡æœ¬
}
```

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```typescript
// Linuxï¼šå°è¯•è¯»å– x-special/gnome-copied-files
if (platform === 'linux') {
  try {
    const gnomeBuffer = clipboard.readBuffer('x-special/gnome-copied-files')
    if (gnomeBuffer && gnomeBuffer.length > 0) {
      // æ ¼å¼: "copy\nfile:///path1\nfile:///path2"
      const lines = gnomeBuffer.toString('utf8').split('\n')
      const action = lines[0] // 'copy' æˆ– 'cut'
      rawPaths = lines.slice(1)
        .filter(line => line.startsWith('file://'))
        .map(line => decodeURIComponent(new URL(line).pathname))
    }
  } catch { /* fallback to text/uri-list */ }
}

// Windows å†™å…¥ï¼šä½¿ç”¨ CF_HDROP æ ¼å¼ï¼ˆéœ€è¦ native module æˆ– workaroundï¼‰
// æ³¨æ„ï¼šElectron åŸç”Ÿä¸æ”¯æŒå†™å…¥ CF_HDROPï¼Œå¯èƒ½éœ€è¦ node-ffi æˆ–æ¥å—å½“å‰é™åˆ¶
```

---

### 5.2 ç³»ç»Ÿè®¾ç½®æ‰“å¼€ç¼ºå°‘ Linux æ”¯æŒ

**æ–‡ä»¶**ï¼š`src/main/index.ts:1797-1814`

**å½“å‰å®ç°**ï¼š

```typescript
ipcMain.handle('system:openSettings', async (_event, section: string) => {
  if (process.platform === 'darwin') {
    // macOS: x-apple.systempreferences æ·±åº¦é“¾æ¥ âœ…
    const url = urlMap[section] || urlMap['extensions']
    await shell.openExternal(url)
    return { success: true }
  } else if (process.platform === 'win32') {
    // Windows: ms-settings URI âœ…
    await shell.openExternal('ms-settings:defaultapps')
    return { success: true }
  }
  return { success: false, error: 'ä¸æ”¯æŒçš„å¹³å°' }  // â† Linux ç›´æ¥è¿”å›å¤±è´¥
})
```

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```typescript
} else if (process.platform === 'linux') {
  // Linux: ä½¿ç”¨ xdg-open æ‰“å¼€ç³»ç»Ÿè®¾ç½®
  const { exec } = require('child_process')
  const sectionMap: Record<string, string> = {
    'extensions': 'gnome-control-center info',      // GNOME
    'security': 'gnome-control-center privacy',
    'default-apps': 'xdg-settings --list',
  }
  // é€šç”¨æ–¹æ¡ˆï¼šå°è¯•æ‰“å¼€ç³»ç»Ÿè®¾ç½®åº”ç”¨
  try {
    exec('xdg-open x-scheme-handler/settings || gnome-control-center')
    return { success: true }
  } catch {
    // é™çº§ï¼šæç¤ºç”¨æˆ·æ‰‹åŠ¨æ‰“å¼€
    return { success: false, error: 'è¯·æ‰‹åŠ¨æ‰“å¼€ç³»ç»Ÿè®¾ç½®' }
  }
}
```

**æ³¨æ„**ï¼šLinux æ¡Œé¢ç¯å¢ƒç¢ç‰‡åŒ–ä¸¥é‡ï¼Œæ— æ³•ä¿è¯ç»Ÿä¸€çš„è®¾ç½® URI schemeã€‚å»ºè®®é‡‡ç”¨é™çº§ç­–ç•¥ï¼šå°è¯• â†’ å¤±è´¥åˆ™æç¤ºç”¨æˆ·ã€‚

---

### 5.3 è®¾ç½®é¢æ¿æ–‡æ¡ˆç¡¬ç¼–ç  "Finder"

**æ–‡ä»¶**ï¼š`src/renderer/src/components/SettingsPanel.tsx`

**é—®é¢˜ä»£ç **ï¼ˆå¤šå¤„ï¼‰ï¼š

> **è¯„å®¡ä¿®æ­£**ï¼šä»¥ä¸‹ 6 å¤„ç¡¬ç¼–ç ä¸­ï¼Œç¬¬ 53 è¡Œï¼ˆå¸è½½ç¡®è®¤ï¼‰å’Œç¬¬ 146 è¡Œï¼ˆè­¦å‘Šæç¤ºï¼‰å·²æœ‰ `needsSystemSettings = platform === 'darwin'` çš„å¹³å°åˆ¤æ–­ï¼ŒFinder ç›¸å…³æ–‡æ¡ˆ**åªåœ¨ macOS ä¸Šæ˜¾ç¤º**ã€‚ç¬¬ 79 è¡Œï¼ˆé™çº§æç¤ºï¼‰å’Œç¬¬ 197 è¡Œï¼ˆå¼•å¯¼æ¨¡æ€æ¡†ï¼‰ä¹Ÿåªåœ¨ macOS æµç¨‹ä¸­è§¦å‘ã€‚çœŸæ­£å½±å“ Windows/Linux ç”¨æˆ·çš„ç¡¬ç¼–ç æ˜¯ç¬¬ 138 è¡Œï¼ˆåŠŸèƒ½æè¿°ï¼‰å’Œç¬¬ 180 è¡Œï¼ˆä½¿ç”¨è¯´æ˜ï¼‰ã€‚

```tsx
// ç¬¬ 138 è¡Œ - åŠŸèƒ½æè¿° â† âŒ æ‰€æœ‰å¹³å°éƒ½æ˜¾ç¤ºï¼Œç¡¬ç¼–ç  Finder
<p className="setting-description">
  åœ¨ Finder ä¸­å³é”®æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œå¿«é€Ÿç”¨ MD Viewer æ‰“å¼€ã€‚
</p>

// ç¬¬ 180 è¡Œ - ä½¿ç”¨è¯´æ˜ â† âŒ æ‰€æœ‰å¹³å°éƒ½æ˜¾ç¤ºï¼Œç¡¬ç¼–ç  Finder
<li>å®‰è£…åï¼Œåœ¨ Finder ä¸­å³é”®ç‚¹å‡» .md æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</li>
<li>é€‰æ‹©ã€Œå¿«é€Ÿæ“ä½œã€â†’ã€Œç”¨ MD Viewer æ‰“å¼€ã€</li>

// ä»¥ä¸‹ 4 å¤„å·²æœ‰å¹³å°åˆ¤æ–­ï¼Œåªåœ¨ macOS ä¸Šæ˜¾ç¤ºï¼ˆéè·¨å¹³å°é—®é¢˜ï¼‰ï¼š
// ç¬¬ 53 è¡Œ - å¸è½½ç¡®è®¤ï¼ˆneedsSystemSettings åˆ¤æ–­ï¼‰
// ç¬¬ 79 è¡Œ - é™çº§æç¤ºï¼ˆhandleOpenSystemSettings ä¸­ï¼‰
// ç¬¬ 146 è¡Œ - è­¦å‘Šæç¤ºï¼ˆneedsManualEnable åˆ¤æ–­ï¼‰
// ç¬¬ 197 è¡Œ - å¼•å¯¼æ¨¡æ€æ¡†ï¼ˆshowEnableGuide åˆ¤æ–­ï¼‰
```

**å®é™…å½±å“èŒƒå›´**ï¼š

| è¡Œå· | æ–‡æ¡ˆ | å½±å“ Windows/Linuxï¼Ÿ |
|------|------|:-------------------:|
| 138 | "åœ¨ Finder ä¸­å³é”®..." | âŒ **æ˜¯**ï¼ˆæ‰€æœ‰å¹³å°æ˜¾ç¤ºï¼‰ |
| 180 | "å®‰è£…åï¼Œåœ¨ Finder ä¸­å³é”®..." | âŒ **æ˜¯**ï¼ˆæ‰€æœ‰å¹³å°æ˜¾ç¤ºï¼‰ |
| 53 | å¸è½½ç¡®è®¤å« Finder | âœ… å¦ï¼ˆå·²æœ‰ `needsSystemSettings` åˆ¤æ–­ï¼‰ |
| 79 | é™çº§æç¤ºå« Finder | âœ… å¦ï¼ˆåªåœ¨ macOS æµç¨‹è§¦å‘ï¼‰ |
| 146 | è­¦å‘Šæç¤ºå« Finder | âœ… å¦ï¼ˆå·²æœ‰ `needsManualEnable` åˆ¤æ–­ï¼‰ |
| 197 | å¼•å¯¼æ¨¡æ€æ¡†å« Finder | âœ… å¦ï¼ˆåªåœ¨ `showEnableGuide` æ—¶æ˜¾ç¤ºï¼‰ |

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```tsx
// åˆ©ç”¨å·²æœ‰çš„ status?.platform ä¿¡æ¯
const fileManagerName = {
  darwin: 'Finder',
  win32: 'èµ„æºç®¡ç†å™¨',
  linux: 'æ–‡ä»¶ç®¡ç†å™¨'
}[status?.platform || ''] || 'æ–‡ä»¶ç®¡ç†å™¨'

// æ›¿æ¢æ‰€æœ‰ç¡¬ç¼–ç çš„ "Finder"
<p>åœ¨ {fileManagerName} ä¸­å³é”®æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œå¿«é€Ÿç”¨ MD Viewer æ‰“å¼€ã€‚</p>

// macOS ä¸“å±çš„ Finder æ‰©å±•å¼•å¯¼åªåœ¨ macOS æ˜¾ç¤ºï¼ˆç¬¬ 182 è¡Œå·²æ­£ç¡®åˆ¤æ–­ isMacOSï¼‰
// ä½†ç¬¬ 146 è¡Œçš„è­¦å‘Šå’Œç¬¬ 53 è¡Œçš„å¸è½½ç¡®è®¤ä¹Ÿéœ€è¦åŠ å¹³å°åˆ¤æ–­
```

**é¢å¤–é—®é¢˜**ï¼šWindows çš„å³é”®èœå•å®‰è£…æµç¨‹ä¸ macOS å®Œå…¨ä¸åŒï¼ˆæ³¨å†Œè¡¨ vs Finder æ‰©å±•ï¼‰ï¼Œä½¿ç”¨è¯´æ˜ä¸­çš„æ­¥éª¤ï¼ˆ"é€‰æ‹©ã€Œå¿«é€Ÿæ“ä½œã€â†’ã€Œç”¨ MD Viewer æ‰“å¼€ã€"ï¼‰æ˜¯ macOS ä¸“å±çš„ã€‚Windows åº”è¯¥æ˜¯"é€‰æ‹©ã€Œç”¨ MD Viewer æ‰“å¼€ã€"ï¼ŒLinux åº”è¯¥æ˜¯"é€‰æ‹©ã€ŒOpen with MD Viewerã€"ã€‚

---

### 5.4 æ ‡ç­¾é¡µå³é”®èœå•ç¡¬ç¼–ç  "Finder"

**æ–‡ä»¶**ï¼š`src/main/tabMenuHandler.ts:72, 80`

**é—®é¢˜ä»£ç **ï¼š

```typescript
{
  label: 'åœ¨ Finder ä¸­æ˜¾ç¤º',  // â† ç¡¬ç¼–ç 
  accelerator: 'CmdOrCtrl+Shift+R',
  click: () => {
    try {
      shell.showItemInFolder(filePath)
    } catch (error) {
      window.webContents.send('error:show', {
        message: `æ— æ³•åœ¨ Finder ä¸­æ˜¾ç¤ºï¼š${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`
        //              ^^^^^^ ç¡¬ç¼–ç 
      })
    }
  }
}
```

**å¯¹æ¯”**ï¼š`contextMenuHandler.ts` å·²æ­£ç¡®å®ç°äº†ä¸‰å¹³å°æ–‡æ¡ˆé€‚é…ï¼Œä½† `tabMenuHandler.ts` é—æ¼äº†ã€‚

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```typescript
const platform = process.platform
const showInFolderLabel =
  platform === 'darwin' ? 'åœ¨ Finder ä¸­æ˜¾ç¤º' :
  platform === 'win32' ? 'åœ¨èµ„æºç®¡ç†å™¨ä¸­æ˜¾ç¤º' :
  'åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ˜¾ç¤º'

const showInFolderError =
  platform === 'darwin' ? 'æ— æ³•åœ¨ Finder ä¸­æ˜¾ç¤º' :
  platform === 'win32' ? 'æ— æ³•åœ¨èµ„æºç®¡ç†å™¨ä¸­æ˜¾ç¤º' :
  'æ— æ³•åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ˜¾ç¤º'
```

---

### 5.5 å…¨å±é€€å‡ºæç¤ºç¡¬ç¼–ç  macOS å¿«æ·é”®

**æ–‡ä»¶**ï¼š`src/renderer/src/assets/main.css:2347`

**é—®é¢˜ä»£ç **ï¼š

```css
.app.fullscreen::before {
  content: "æŒ‰ ESC æˆ– Cmd+Ctrl+F é€€å‡ºå…¨å±";
  /* ... */
}
```

**å„å¹³å°å½±å“**ï¼š

| å¹³å° | ç”¨æˆ·çœ‹åˆ° | æ­£ç¡®æç¤º |
|------|---------|---------|
| macOS | "æŒ‰ ESC æˆ– Cmd+Ctrl+F é€€å‡ºå…¨å±" | âš ï¸ åº”ä¸º Cmd+F11ï¼ˆä¸å®é™…å¿«æ·é”®ä¸ä¸€è‡´ï¼‰ |
| Windows | "æŒ‰ ESC æˆ– Cmd+Ctrl+F é€€å‡ºå…¨å±" | âŒ åº”ä¸º "æŒ‰ ESC æˆ– Ctrl+F11 é€€å‡ºå…¨å±" |
| Linux | "æŒ‰ ESC æˆ– Cmd+Ctrl+F é€€å‡ºå…¨å±" | âŒ åŒ Windows |

**æ³¨æ„**ï¼šè¿™é‡Œè¿˜æœ‰ä¸€ä¸ª bugâ€”â€”æç¤ºå†™çš„æ˜¯ `Cmd+Ctrl+F`ï¼Œä½†å®é™…å…¨å±å¿«æ·é”®æ˜¯ `Cmd+F11`ï¼ˆè§ `App.tsx:92`ï¼‰ï¼Œæ–‡æ¡ˆæœ¬èº«å°±æ˜¯é”™çš„ã€‚

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```css
/* çº¯ CSS æ— æ³•æ£€æµ‹å¹³å°ï¼Œéœ€è¦ JS é…åˆ */
/* é»˜è®¤ï¼ˆWindows/Linuxï¼‰ */
.app.fullscreen::before {
  content: "æŒ‰ ESC æˆ– Ctrl+F11 é€€å‡ºå…¨å±";
}

/* macOS */
body[data-platform="darwin"] .app.fullscreen::before {
  content: "æŒ‰ ESC æˆ– âŒ˜F11 é€€å‡ºå…¨å±";
}
```

---

### 5.6 æœç´¢æ å¿«æ·é”®æç¤ºç¡¬ç¼–ç  âŒ˜K

**æ–‡ä»¶**ï¼š`src/renderer/src/components/SearchBar.tsx:417, 423`

**é—®é¢˜ä»£ç **ï¼š

```tsx
<button
  title="æœç´¢æ–‡ä»¶ (âŒ˜K)"  // â† ç¡¬ç¼–ç  macOS ç¬¦å·
>
  {/* ... */}
  <kbd className="shortcut">âŒ˜K</kbd>  {/* â† ç¡¬ç¼–ç  macOS ç¬¦å· */}
</button>
```

**å„å¹³å°å½±å“**ï¼š

| å¹³å° | ç”¨æˆ·çœ‹åˆ° | æ­£ç¡®æ˜¾ç¤º |
|------|---------|---------|
| macOS | âŒ˜K | âœ… æ­£ç¡® |
| Windows | âŒ˜K | âŒ åº”ä¸º Ctrl+K |
| Linux | âŒ˜K | âŒ åº”ä¸º Ctrl+K |

**æ³¨æ„**ï¼š`SearchBar.tsx:355` ä¸­çš„å¿«æ·é”®ç›‘å¬å·²æ­£ç¡®ä½¿ç”¨ `e.metaKey || e.ctrlKey`ï¼Œåªæ˜¯ UI æ˜¾ç¤ºé—æ¼äº†ã€‚

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```tsx
// é€šè¿‡ preload è·å–å¹³å°ä¿¡æ¯ï¼Œæˆ–ä½¿ç”¨ navigator.userAgent
const isMac = window.api?.platform === 'darwin'
const searchShortcut = isMac ? 'âŒ˜K' : 'Ctrl+K'

<button title={`æœç´¢æ–‡ä»¶ (${searchShortcut})`}>
  <kbd className="shortcut">{searchShortcut}</kbd>
</button>
```

---

### 5.7 çª—å£ç½®é¡¶æŒ‰é’® title ç¡¬ç¼–ç  âŒ˜âŒ¥T

**æ–‡ä»¶**ï¼š`src/renderer/src/components/NavigationBar.tsx:101`

**é—®é¢˜ä»£ç **ï¼š

```tsx
<button
  title={isAlwaysOnTop ? 'å–æ¶ˆç½®é¡¶ (âŒ˜âŒ¥T)' : 'çª—å£ç½®é¡¶ (âŒ˜âŒ¥T)'}
  // ...
>
```

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```tsx
const isMac = window.api?.platform === 'darwin'
const shortcut = isMac ? 'âŒ˜âŒ¥T' : 'Ctrl+Alt+T'

<button
  title={isAlwaysOnTop ? `å–æ¶ˆç½®é¡¶ (${shortcut})` : `çª—å£ç½®é¡¶ (${shortcut})`}
>
```

---

### 5.8 NavigationBar è·¯å¾„åˆ†éš”ç¬¦åœ¨ Windows ä¸Šè§£æé”™è¯¯

**æ–‡ä»¶**ï¼š`src/renderer/src/components/NavigationBar.tsx:66`

**é—®é¢˜ä»£ç **ï¼š

```tsx
<span className="nav-folder-path" title={folderPath}>
  ğŸ“‚ {folderPath.split('/').pop()}
</span>
```

**å„å¹³å°å½±å“**ï¼š

| å¹³å° | `folderPath` ç¤ºä¾‹ | `split('/').pop()` ç»“æœ |
|------|-------------------|------------------------|
| macOS | `/Users/mac/Documents` | âœ… `Documents` |
| Linux | `/home/user/Documents` | âœ… `Documents` |
| Windows | `C:\Users\user\Documents` | âŒ `C:\Users\user\Documents`ï¼ˆæ•´ä¸ªè·¯å¾„ï¼‰ |

**é—®é¢˜**ï¼šWindows è·¯å¾„ä½¿ç”¨ `\` åˆ†éš”ç¬¦ï¼Œ`split('/')` æ— æ³•æ­£ç¡®åˆ†å‰²ã€‚

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```tsx
// æ–¹æ¡ˆ Aï¼šåŒæ—¶æ”¯æŒä¸¤ç§åˆ†éš”ç¬¦
ğŸ“‚ {folderPath.split(/[/\\]/).pop()}

// æ–¹æ¡ˆ Bï¼šåœ¨ä¸»è¿›ç¨‹ä¸­ç”¨ path.basename() å¤„ç†åä¼ ç»™æ¸²æŸ“è¿›ç¨‹
```

---

### 5.9 å¿«æ·é”®å¸®åŠ©å¯¹è¯æ¡†ä½¿ç”¨å·²åºŸå¼ƒçš„ navigator.platform

**æ–‡ä»¶**ï¼š`src/renderer/src/components/ShortcutsHelpDialog.tsx:60`

**é—®é¢˜ä»£ç **ï¼š

```typescript
function formatAccelerator(accelerator: string): string {
  const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0
  // ...
}
```

**é—®é¢˜**ï¼š
- `navigator.platform` å·²è¢« W3C æ ‡è®°ä¸º **deprecated**
- Chromium è®¡åˆ’åœ¨æœªæ¥ç‰ˆæœ¬ä¸­å†»ç»“æˆ–ç§»é™¤è¯¥å±æ€§
- åœ¨æŸäº› Electron ç‰ˆæœ¬ä¸­å¯èƒ½è¿”å›ä¸å‡†ç¡®çš„å€¼

**ä¿®å¤æ–¹æ¡ˆ**ï¼š

```typescript
// ç»Ÿä¸€ä½¿ç”¨ä¸»è¿›ç¨‹ä¼ é€’çš„å¹³å°ä¿¡æ¯
const isMac = window.api?.platform === 'darwin'
```

**é¢å¤–é—®é¢˜**ï¼šè¯¥å‡½æ•°çš„ Windows/Linux åˆ†æ”¯æ²¡æœ‰å¤„ç† `Shift`ã€`Alt`ã€`Tab` çš„æ ¼å¼åŒ–ï¼š

```typescript
// macOS åˆ†æ”¯ï¼ˆå®Œæ•´ï¼‰
.replace(/Shift/g, 'â‡§')
.replace(/Alt/g, 'âŒ¥')
.replace(/Tab/g, 'â‡¥')

// Windows/Linux åˆ†æ”¯ï¼ˆä¸å®Œæ•´ï¼‰
.replace(/CmdOrCtrl/g, 'Ctrl')
.replace(/Cmd/g, 'Ctrl')
// â† ç¼ºå°‘ Shiftã€Altã€Tab çš„å¤„ç†ï¼ˆè™½ç„¶è¿™äº›åœ¨ Win/Linux ä¸Šä¸éœ€è¦æ›¿æ¢ç¬¦å·ï¼Œ
//    ä½† + å·åˆ†éš”ç¬¦çš„å¤„ç†ä¹Ÿç¼ºå¤±äº†ï¼‰
```

---

### 5+ P2 æ¬¡è¦é—®é¢˜

### P2.1 macOS open-file/open-url äº‹ä»¶æœªåšå¹³å°éš”ç¦»

**æ–‡ä»¶**ï¼š`src/main/index.ts:182-195`

```typescript
// macOS: å¤„ç† open-file äº‹ä»¶ï¼ˆåœ¨ app ready ä¹‹å‰ä¹Ÿå¯èƒ½è§¦å‘ï¼‰
app.on('open-file', async (event, filePath) => {
  event.preventDefault()
  console.log('[macOS] open-file event received:', filePath)
  await handleLaunchArgs([filePath])
})

// macOS: å¤„ç† open-url äº‹ä»¶
app.on('open-url', async (event, url) => {
  event.preventDefault()
  console.log('[macOS] open-url event:', url)
})
```

**é—®é¢˜**ï¼šè™½ç„¶ `open-file` å’Œ `open-url` æ˜¯ macOS ä¸“å±äº‹ä»¶ï¼ˆWindows/Linux ä¸ä¼šè§¦å‘ï¼‰ï¼Œä½†æ³¨å†Œè¿™äº›äº‹ä»¶ç›‘å¬å™¨åœ¨å…¶ä»–å¹³å°ä¸Šæ˜¯æ— å®³çš„å†—ä½™ä»£ç ã€‚å»ºè®®ç”¨ `if (process.platform === 'darwin')` åŒ…è£¹ï¼Œä½¿ä»£ç æ„å›¾æ›´æ¸…æ™°ã€‚

### P2.2 shell.trashItem() åœ¨ Linux ä¸Šå¯èƒ½å¤±è´¥

**æ–‡ä»¶**ï¼š`src/main/contextMenuHandler.ts:194`

```typescript
await shell.trashItem(file.path)
```

**é—®é¢˜**ï¼š`shell.trashItem()` åœ¨ Linux ä¸Šä¾èµ– `gvfs-trash` æˆ– `gio trash` å‘½ä»¤ã€‚å¦‚æœç”¨æˆ·çš„ Linux å‘è¡Œç‰ˆæœªå®‰è£… GVFSï¼ˆå¦‚æŸäº›æœ€å°åŒ–å®‰è£…çš„ Arch Linuxï¼‰ï¼Œè¯¥è°ƒç”¨ä¼šé™é»˜å¤±è´¥æˆ–æŠ›å‡ºå¼‚å¸¸ã€‚å»ºè®®æ·»åŠ  Linux ç‰¹å®šçš„é”™è¯¯å¤„ç†å’Œé™çº§æ–¹æ¡ˆï¼ˆæç¤ºç”¨æˆ·æ°¸ä¹…åˆ é™¤æˆ–å®‰è£… gvfsï¼‰ã€‚

### P2.3 chokidar æ–‡ä»¶ç›‘å¬åœ¨ Windows ä¸Šçš„æ€§èƒ½å·®å¼‚

**æ–‡ä»¶**ï¼š`src/main/index.ts:1212`

```typescript
fileWatcher = chokidar.watch(dirPath, {
  persistent: true,
  ignoreInitial: true,
  // ...
})
```

**é—®é¢˜**ï¼šchokidar åœ¨ä¸åŒå¹³å°ä½¿ç”¨ä¸åŒçš„åº•å±‚æœºåˆ¶ï¼š
- macOSï¼šFSEventsï¼ˆé«˜æ•ˆï¼‰
- Linuxï¼šinotifyï¼ˆé«˜æ•ˆï¼Œä½†æœ‰ watch æ•°é‡é™åˆ¶ï¼‰
- Windowsï¼šReadDirectoryChangesWï¼ˆå¯èƒ½å›é€€åˆ°è½®è¯¢ï¼‰

Linux ä¸Šå¦‚æœç›‘å¬çš„ç›®å½•å±‚çº§å¾ˆæ·±ï¼Œå¯èƒ½è§¦åŠ `fs.inotify.max_user_watches` é™åˆ¶ï¼ˆé»˜è®¤ 8192ï¼‰ã€‚å»ºè®®åœ¨æ–‡æ¡£ä¸­æç¤º Linux ç”¨æˆ·å¯èƒ½éœ€è¦è°ƒæ•´è¯¥å†…æ ¸å‚æ•°ã€‚

---

## 6. å·²æ­£ç¡®å¤„ç†çš„è·¨å¹³å°é€»è¾‘

ä»¥ä¸‹æ¨¡å—å·²ç»æ­£ç¡®å®ç°äº†è·¨å¹³å°å…¼å®¹ï¼Œå€¼å¾—ä½œä¸ºå‚è€ƒæ¨¡å¼ï¼š

### 6.1 ä¸»è¿›ç¨‹å¿«æ·é”®ï¼ˆshortcuts.tsï¼‰

```typescript
// âœ… æ­£ç¡®çš„å¹³å°æ£€æµ‹æ¨¡å¼
const isMac = process.platform === 'darwin'
const cmdOrCtrl = isMac ? input.meta : input.control
```

æ‰€æœ‰ `shortcuts.ts` ä¸­çš„å¿«æ·é”®éƒ½ä½¿ç”¨äº† `cmdOrCtrl` å˜é‡ï¼Œç¡®ä¿ macOS ç”¨ Cmdã€Windows/Linux ç”¨ Ctrlã€‚

### 6.2 å³é”®èœå•å›½é™…åŒ–ï¼ˆcontextMenuHandler.tsï¼‰

```typescript
// âœ… ä¸‰å¹³å°æ–‡æ¡ˆé€‚é…
const i18n = {
  showInFolder:
    platform === 'darwin'
      ? 'ğŸ“‚ åœ¨ Finder ä¸­æ˜¾ç¤º'
      : platform === 'win32'
      ? 'ğŸ“‚ åœ¨èµ„æºç®¡ç†å™¨ä¸­æ˜¾ç¤º'
      : 'ğŸ“‚ åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ˜¾ç¤º',
}
```

### 6.3 Electron å†…ç½®è·¨å¹³å° API

```typescript
// âœ… shell.showItemInFolder - Electron è‡ªåŠ¨å¤„ç†ä¸‰å¹³å°
shell.showItemInFolder(filePath)

// âœ… path.join / path.sep - Node.js è‡ªåŠ¨å¤„ç†è·¯å¾„åˆ†éš”ç¬¦
const fullPath = path.join(basePath, relativePath)

// âœ… CommandOrControl åŠ é€Ÿå™¨ - Electron è‡ªåŠ¨æ˜ å°„
{ accelerator: 'CommandOrControl+O', action: 'open-folder' }
```

### 6.4 å­—ä½“æ ˆ

CSS ä¸­çš„å­—ä½“æ ˆåŒ…å«äº†ä¸‰å¹³å°çš„ç³»ç»Ÿå­—ä½“ï¼Œç¡®ä¿æ–‡å­—æ¸²æŸ“æ­£å¸¸ã€‚

---

## 7. ä¿®å¤æ–¹æ¡ˆæ±‡æ€»

### ğŸ”´ P0 ä¸¥é‡é—®é¢˜ï¼ˆ6 ä¸ªï¼‰

| # | é—®é¢˜ | ä¿®å¤å¤æ‚åº¦ | ä¿®å¤æ–¹æ¡ˆ | æ¶‰åŠæ–‡ä»¶ |
|---|------|:---------:|---------|---------|
| 1 | çª—å£æ ‡é¢˜æ  macOS ä¸“å± | ä¸­ | å¹³å°æ¡ä»¶é…ç½® BrowserWindow | `src/main/index.ts` |
| 2 | NavigationBar padding 80px | ä½ | CSS å¹³å°é€‰æ‹©å™¨ | `NavigationBar.css` |
| 3 | CSS æ‹–æ‹½åŒºåŸŸ left:80px | ä½ | CSS å˜é‡ + å¹³å°æ£€æµ‹ | `main.css` + `App.tsx` |
| 4 | å…¨å±å¿«æ·é”®åªæ”¯æŒ Cmd | ä½ | macOS: Cmd+F11, Win/Linux: F11 | `src/renderer/src/App.tsx` |
| 5 | ç¼ºå°‘ Win/Linux å›¾æ ‡ | ä½ | ç”Ÿæˆ ico/png + æ›´æ–°é…ç½® | `package.json` + `resources/` |
| 6 | Linux å³é”®èœå•å¼•ç”¨ä¸å­˜åœ¨çš„ icon.png | ä½ | ç”Ÿæˆ icon.png + extraResources | `contextMenuInstaller.ts` + `resources/` |

### âš ï¸ P1 ä¸­ç­‰é—®é¢˜ï¼ˆ9 ä¸ªï¼‰

| # | é—®é¢˜ | ä¿®å¤å¤æ‚åº¦ | ä¿®å¤æ–¹æ¡ˆ | æ¶‰åŠæ–‡ä»¶ |
|---|------|:---------:|---------|---------|
| 7 | è®¾ç½®é¢æ¿ç¡¬ç¼–ç  "Finder"ï¼ˆ2 å¤„å½±å“ Win/Linuxï¼‰ | ä¸­ | åŠ¨æ€æ–‡æ¡ˆ + å¹³å°åˆ¤æ–­ | `SettingsPanel.tsx` |
| 8 | æ ‡ç­¾é¡µå³é”®èœå•ç¡¬ç¼–ç  "Finder" | ä½ | ä¸‰å¹³å°æ–‡æ¡ˆæ˜ å°„ | `tabMenuHandler.ts` |
| 9 | å…¨å±é€€å‡ºæç¤ºç¡¬ç¼–ç  Cmd+Ctrl+F | ä½ | CSS å¹³å°é€‰æ‹©å™¨ï¼ˆåŒæ—¶ä¿®å¤å¿«æ·é”®æ–‡æ¡ˆé”™è¯¯ï¼‰ | `main.css` |
| 10 | æœç´¢æ å¿«æ·é”®æç¤ºç¡¬ç¼–ç  âŒ˜K | ä½ | å¹³å°åˆ¤æ–­åŠ¨æ€æ˜¾ç¤º | `SearchBar.tsx` |
| 11 | ç½®é¡¶æŒ‰é’® title ç¡¬ç¼–ç  âŒ˜âŒ¥T | ä½ | å¹³å°åˆ¤æ–­åŠ¨æ€æ˜¾ç¤º | `NavigationBar.tsx` |
| 12 | ç³»ç»Ÿè®¾ç½®æ‰“å¼€ç¼ºå°‘ Linux æ”¯æŒ | ä¸­ | æ·»åŠ  xdg-open é™çº§æ–¹æ¡ˆ | `src/main/index.ts` |
| 13 | å‰ªè´´æ¿ Linux æ”¯æŒä¸å®Œæ•´ | é«˜ | æ·»åŠ  GNOME/KDE å‰ªè´´æ¿æ ¼å¼ | `clipboardManager.ts` |
| 14 | å‰ªè´´æ¿ Windows å†™å…¥ä»…æ–‡æœ¬ | é«˜ | éœ€ native module æˆ–æ¥å—é™åˆ¶ | `clipboardManager.ts` |
| 15 | NavigationBar è·¯å¾„ç”¨ `/` åˆ†å‰² | ä½ | æ­£åˆ™åŒæ—¶åŒ¹é… `/` å’Œ `\` | `NavigationBar.tsx` |

### ğŸ”µ P2 æ¬¡è¦é—®é¢˜ï¼ˆ3 ä¸ªï¼‰

| # | é—®é¢˜ | ä¿®å¤å¤æ‚åº¦ | ä¿®å¤æ–¹æ¡ˆ | æ¶‰åŠæ–‡ä»¶ |
|---|------|:---------:|---------|---------|
| 16 | navigator.platform å·²åºŸå¼ƒ | ä½ | æ”¹ç”¨ preload æš´éœ²çš„ platform | `ShortcutsHelpDialog.tsx` |
| 17 | open-file/open-url æœªåšå¹³å°éš”ç¦» | ä½ | æ·»åŠ  `if (darwin)` åŒ…è£¹ | `src/main/index.ts` |
| 18 | shell.trashItem Linux å¯èƒ½å¤±è´¥ | ä¸­ | æ·»åŠ é™çº§æ–¹æ¡ˆï¼ˆæç¤ºæ°¸ä¹…åˆ é™¤ï¼‰ | `contextMenuHandler.ts` |

---

## 8. ä¼˜å…ˆçº§æ’åºä¸å®æ–½å»ºè®®

### ç¬¬ä¸€æ‰¹ï¼šP0 å¿«é€Ÿä¿®å¤ï¼ˆå½±å“å¤§ã€æ”¹åŠ¨å°ï¼‰

```
ä¼˜å…ˆçº§ 1 â”€â”€â–º [#4] å…¨å±å¿«æ·é”®
             æ”¹åŠ¨ï¼šä¿®æ”¹ App.tsx ç¬¬ 92 è¡Œï¼ˆmacOS: Cmd+F11, Win/Linux: F11ï¼‰
             é£é™©ï¼šä½ï¼ˆéœ€éªŒè¯ Electron é»˜è®¤ F11 è¡Œä¸ºæ˜¯å¦å†²çªï¼‰
             æ–‡ä»¶ï¼šApp.tsx

ä¼˜å…ˆçº§ 2 â”€â”€â–º [#5 + #6] å›¾æ ‡æ–‡ä»¶
             æ”¹åŠ¨ï¼šç”Ÿæˆ icon.ico + icon.png + æ›´æ–° package.json
             é£é™©ï¼šä½ï¼ˆä¸å½±å“è¿è¡Œæ—¶ï¼‰
             æ–‡ä»¶ï¼šresources/ + package.json

ä¼˜å…ˆçº§ 3 â”€â”€â–º [#2 + #3] CSS å¸ƒå±€ä¿®å¤
             æ”¹åŠ¨ï¼šCSS å˜é‡ï¼ˆé»˜è®¤ 0pxï¼ŒmacOS è¦†ç›– 80pxï¼‰+ body[data-platform] æ³¨å…¥
             é£é™©ï¼šä½ï¼ˆé»˜è®¤å€¼ä¸º Win/Linux æ ·å¼ï¼Œé¿å… FOUC é—ªçƒï¼‰
             æ–‡ä»¶ï¼šNavigationBar.css + main.css + App.tsx
```

### ç¬¬äºŒæ‰¹ï¼šP0 æ¶æ„è°ƒæ•´

```
ä¼˜å…ˆçº§ 4 â”€â”€â–º [#1] çª—å£æ ‡é¢˜æ 
             æ”¹åŠ¨ï¼šé‡æ„ BrowserWindow é…ç½®ï¼Œå¹³å°æ¡ä»¶åˆ†æ”¯
             é£é™©ï¼šä¸­ï¼ˆå½±å“çª—å£å¤–è§‚å’Œäº¤äº’ï¼‰
             å»ºè®®ï¼šå…ˆåœ¨ Windows VM ä¸­æµ‹è¯•
             æ–‡ä»¶ï¼šsrc/main/index.ts
```

### ç¬¬ä¸‰æ‰¹ï¼šP1 æ–‡æ¡ˆå›½é™…åŒ–ï¼ˆæ‰¹é‡ä¿®å¤ï¼Œæ”¹åŠ¨é›†ä¸­ï¼‰

```
ä¼˜å…ˆçº§ 5 â”€â”€â–º [#7] è®¾ç½®é¢æ¿æ–‡æ¡ˆï¼ˆ2 å¤„å½±å“ Win/Linuxï¼Œ4 å¤„å·²æœ‰å¹³å°åˆ¤æ–­ï¼‰
             æ”¹åŠ¨ï¼šå¼•å…¥ fileManagerName å˜é‡ï¼Œæ›¿æ¢ç¬¬ 138ã€180 è¡Œçš„ "Finder"
             é£é™©ï¼šä½ï¼ˆçº¯æ–‡æ¡ˆä¿®æ”¹ï¼‰
             æ–‡ä»¶ï¼šSettingsPanel.tsx

ä¼˜å…ˆçº§ 6 â”€â”€â–º [#8 + #9 + #10 + #11] å…¶ä»–æ–‡æ¡ˆä¿®å¤
             æ”¹åŠ¨ï¼š4 ä¸ªæ–‡ä»¶å„æ”¹ 1-2 è¡Œ
             é£é™©ï¼šæä½
             æ–‡ä»¶ï¼štabMenuHandler.ts + main.css + SearchBar.tsx + NavigationBar.tsx

ä¼˜å…ˆçº§ 7 â”€â”€â–º [#15] è·¯å¾„åˆ†éš”ç¬¦
             æ”¹åŠ¨ï¼š1 è¡Œæ­£åˆ™ä¿®æ”¹
             é£é™©ï¼šæä½
             æ–‡ä»¶ï¼šNavigationBar.tsx
```

### ç¬¬å››æ‰¹ï¼šP1 åŠŸèƒ½è¡¥å…¨

```
ä¼˜å…ˆçº§ 8 â”€â”€â–º [#12] ç³»ç»Ÿè®¾ç½® Linux
             æ”¹åŠ¨ï¼šæ·»åŠ  Linux åˆ†æ”¯ + é™çº§æ–¹æ¡ˆ
             é£é™©ï¼šä½ï¼ˆé™çº§æ–¹æ¡ˆå…œåº•ï¼‰
             æ–‡ä»¶ï¼šsrc/main/index.ts

ä¼˜å…ˆçº§ 9 â”€â”€â–º [#13 + #14] å‰ªè´´æ¿è·¨å¹³å°
             æ”¹åŠ¨ï¼šæ·»åŠ  GNOME/KDE å‰ªè´´æ¿æ ¼å¼ + Windows CF_HDROP
             é£é™©ï¼šä¸­ï¼ˆLinux æ¡Œé¢ç¯å¢ƒç¢ç‰‡åŒ–ï¼‰
             å»ºè®®ï¼šå…ˆæ”¯æŒ GNOMEï¼ˆå¸‚åœºä»½é¢æœ€å¤§ï¼‰ï¼ŒWindows å†™å…¥å¯æš‚æ—¶æ¥å—é™åˆ¶
             æ–‡ä»¶ï¼šclipboardManager.ts
```

### ç¬¬äº”æ‰¹ï¼šP2 ä¼˜åŒ–

```
ä¼˜å…ˆçº§ 10 â”€â”€â–º [#16 + #17 + #18] ä»£ç è´¨é‡ä¼˜åŒ–
              æ”¹åŠ¨ï¼šåºŸå¼ƒ API æ›¿æ¢ + å¹³å°éš”ç¦» + é”™è¯¯å¤„ç†
              é£é™©ï¼šæä½
```

### å®æ–½å‰ç½®æ¡ä»¶ï¼šå¹³å°ä¿¡æ¯æ³¨å…¥

å¤šä¸ªä¿®å¤æ–¹æ¡ˆä¾èµ–æ¸²æŸ“è¿›ç¨‹è·å–å¹³å°ä¿¡æ¯ï¼Œå»ºè®®å…ˆå®ç°ç»Ÿä¸€çš„å¹³å°ä¿¡æ¯æ³¨å…¥æœºåˆ¶ï¼š

```typescript
// 1. preload/index.ts - æš´éœ²å¹³å°ä¿¡æ¯
contextBridge.exposeInMainWorld('api', {
  // ... ç°æœ‰ API
  platform: process.platform  // 'darwin' | 'win32' | 'linux'
})

// 2. App.tsx - åˆå§‹åŒ–æ—¶æ³¨å…¥ data-platform åˆ° body
useEffect(() => {
  const platform = window.api?.platform || 'darwin'
  document.body.setAttribute('data-platform', platform)
}, [])
```

è¿™æ · CSS å¯ä»¥ç”¨ `body[data-platform="darwin"]` é€‰æ‹©å™¨ï¼ŒJS å¯ä»¥ç”¨ `window.api.platform` åˆ¤æ–­ã€‚

### æµ‹è¯•ç­–ç•¥

| å¹³å° | æµ‹è¯•ç¯å¢ƒå»ºè®® | é‡ç‚¹æµ‹è¯•é¡¹ |
|------|------------|-----------|
| macOS | æœ¬æœºå¼€å‘ç¯å¢ƒ | å›å½’æµ‹è¯•ï¼ˆç¡®ä¿ä¿®æ”¹ä¸ç ´åç°æœ‰åŠŸèƒ½ï¼‰ |
| Windows | VirtualBox/Parallels + Windows 11 | æ ‡é¢˜æ ã€å¸ƒå±€ã€å¿«æ·é”®ã€å›¾æ ‡ã€è·¯å¾„åˆ†éš”ç¬¦ |
| Linux | VirtualBox + Ubuntu 24.04 (GNOME) | å³é”®èœå•å®‰è£…ã€å›¾æ ‡ã€å‰ªè´´æ¿ã€trashItem |

### è‡ªåŠ¨åŒ–æ£€æµ‹å»ºè®®

åœ¨ CI ä¸­æ·»åŠ è·¨å¹³å°æ„å»ºéªŒè¯ï¼š

```yaml
# GitHub Actions ç¤ºä¾‹
jobs:
  build:
    strategy:
      matrix:
        os: [macos-latest, windows-latest, ubuntu-latest]
    runs-on: ${{ matrix.os }}
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
      - run: npm ci
      - run: npm run build
      - run: npm test -- --run
```

### é™æ€æ£€æµ‹å»ºè®®

å¯ä»¥æ·»åŠ  ESLint è‡ªå®šä¹‰è§„åˆ™æˆ– grep è„šæœ¬ï¼Œåœ¨ CI ä¸­æ£€æµ‹å¸¸è§çš„è·¨å¹³å°é—®é¢˜ï¼š

```bash
#!/bin/bash
# scripts/check-cross-platform.sh

echo "æ£€æŸ¥ç¡¬ç¼–ç çš„ macOS ç¬¦å·..."
grep -rn 'âŒ˜\|âŒ¥\|âŒƒ\|â‡§' src/renderer/src/components/ --include='*.tsx' \
  | grep -v 'ShortcutsHelpDialog' \
  | grep -v 'isMac'

echo "æ£€æŸ¥ç¡¬ç¼–ç çš„ Finder æ–‡æ¡ˆ..."
grep -rn 'Finder' src/ --include='*.ts' --include='*.tsx' \
  | grep -v 'contextMenuHandler.ts' \
  | grep -v '__tests__'

echo "æ£€æŸ¥åªä½¿ç”¨ metaKey çš„å¿«æ·é”®..."
grep -rn 'e\.metaKey' src/renderer/ --include='*.tsx' \
  | grep -v 'ctrlKey'

echo "æ£€æŸ¥ç¡¬ç¼–ç çš„è·¯å¾„åˆ†éš”ç¬¦..."
grep -rn "split('/')" src/renderer/ --include='*.tsx'
```

---

## 9. æ“ä½œç³»ç»Ÿç‰ˆæœ¬å…¼å®¹æ€§åˆ†æ

> æœ¬ç« åˆ†æä¸åŒ OS **ç‰ˆæœ¬**å¯¹ MD Viewer çš„å½±å“ï¼Œé‡ç‚¹å…³æ³¨å®‰å…¨æœºåˆ¶æ¼”è¿›å¯¼è‡´çš„å®‰è£…/è¿è¡Œéšœç¢ã€‚

### 9.1 macOS ç‰ˆæœ¬å·®å¼‚ï¼ˆé‡ç‚¹ï¼‰

#### 9.1.1 å®‰å…¨æœºåˆ¶æ¼”è¿›æ—¶é—´çº¿

```
2019 â”€â”€â”€ macOS 10.15 Catalina â”€â”€â”€â”€ å¼ºåˆ¶å…¬è¯ + Gatekeeper å¼ºåŒ–
  â”‚                                  æœªå…¬è¯åº”ç”¨æç¤º"æ— æ³•éªŒè¯å¼€å‘è€…"
  â”‚
2020 â”€â”€â”€ macOS 11 Big Sur â”€â”€â”€â”€â”€â”€â”€â”€ Apple Silicon + Universal Binary
  â”‚                                  M1 Mac å¯¹æœªç­¾ååº”ç”¨æ›´ä¸¥æ ¼
  â”‚
2021 â”€â”€â”€ macOS 12 Monterey â”€â”€â”€â”€â”€â”€â”€ Gatekeeper å¢å¼ºéªŒè¯
  â”‚                                  App Translocation æœºåˆ¶æ”¹è¿›
  â”‚
2022 â”€â”€â”€ macOS 13 Ventura â”€â”€â”€â”€â”€â”€â”€â”€ âš ï¸ æ–°å¢ com.apple.provenance å±æ€§
  â”‚                                  xattr -cr å¯èƒ½ä¸å¤Ÿï¼Œéœ€é¢å¤–å¤„ç†
  â”‚
2023 â”€â”€â”€ macOS 14 Sonoma â”€â”€â”€â”€â”€â”€â”€â”€ è¿›ä¸€æ­¥å¼ºåŒ–æ¶æ„è½¯ä»¶æ£€æµ‹
  â”‚
2024 â”€â”€â”€ macOS 15 Sequoia â”€â”€â”€â”€â”€â”€â”€ å®‰å…¨æç¤ºæ›´é¢‘ç¹ï¼Œå¤šæ¬¡ç¡®è®¤
```

#### 9.1.2 `xattr -cr` åœ¨ä¸åŒç‰ˆæœ¬ä¸Šçš„æœ‰æ•ˆæ€§

**å½“å‰ README ä¸­çš„è¯´æ˜**ï¼š

```bash
xattr -cr /Applications/MD\ Viewer.app
```

**å„ç‰ˆæœ¬å®é™…è¡¨ç°**ï¼š

| macOS ç‰ˆæœ¬ | `xattr -cr` æœ‰æ•ˆæ€§ | ç”¨æˆ·çœ‹åˆ°çš„é”™è¯¯æç¤º | éœ€è¦çš„é¢å¤–æ­¥éª¤ |
|-----------|:------------------:|-----------------|-------------|
| 10.15 Catalina | âœ… æœ‰æ•ˆ | "æ— æ³•éªŒè¯å¼€å‘è€…" | æ—  |
| 11 Big Sur | âœ… æœ‰æ•ˆ | "æ— æ³•éªŒè¯å¼€å‘è€…" | æ—  |
| 12 Monterey | âœ… æœ‰æ•ˆ | "å·²æŸåï¼Œæ— æ³•æ‰“å¼€" | æ—  |
| **13 Ventura** | âš ï¸ **éƒ¨åˆ†æœ‰æ•ˆ** | "å·²æŸåï¼Œæ— æ³•æ‰“å¼€" | å¯èƒ½éœ€è¦ `xattr -d com.apple.provenance` |
| **14 Sonoma** | âš ï¸ **éƒ¨åˆ†æœ‰æ•ˆ** | "å·²æŸåï¼Œæ— æ³•æ‰“å¼€" | åŒ Ventura |
| **15 Sequoia** | âš ï¸ **éƒ¨åˆ†æœ‰æ•ˆ** | å¤šæ¬¡å®‰å…¨æç¤º | åŒ Ventura + å¯èƒ½éœ€è¦å¤šæ¬¡ç¡®è®¤ |

**å…³é”®é—®é¢˜**ï¼šmacOS 13 Ventura å¼•å…¥äº† `com.apple.provenance` æ‰©å±•å±æ€§ï¼Œç”¨äºè¿½è¸ªåº”ç”¨æ¥æºã€‚`xattr -cr` å¯ä»¥æ¸…é™¤ `com.apple.quarantine`ï¼Œä½† **ä¸ä¸€å®šèƒ½æ¸…é™¤ `com.apple.provenance`**ã€‚

**å®Œæ•´çš„è§£å†³æ–¹æ¡ˆåº”è¯¥æ˜¯**ï¼š

```bash
# æ­¥éª¤ 1ï¼šæ¸…é™¤æ‰€æœ‰æ‰©å±•å±æ€§ï¼ˆåŒ…æ‹¬ quarantineï¼‰
xattr -cr /Applications/MD\ Viewer.app

# æ­¥éª¤ 2ï¼šå¦‚æœæ­¥éª¤ 1 åä»ç„¶æç¤º"å·²æŸå"ï¼Œå•ç‹¬åˆ é™¤ provenance
xattr -d com.apple.provenance /Applications/MD\ Viewer.app 2>/dev/null

# æ­¥éª¤ 3ï¼šéªŒè¯å±æ€§å·²æ¸…é™¤
xattr -l /Applications/MD\ Viewer.app
# åº”è¯¥è¾“å‡ºä¸ºç©º
```

#### 9.1.3 `hardenedRuntime: false` çš„å½±å“

**å½“å‰é…ç½®**ï¼ˆ`package.json:67`ï¼‰ï¼š

```json
{
  "mac": {
    "hardenedRuntime": false,
    "gatekeeperAssess": false
  }
}
```

**é—®é¢˜åˆ†æ**ï¼š

| é…ç½®é¡¹ | å½“å‰å€¼ | å½±å“ |
|-------|-------|------|
| `hardenedRuntime` | `false` | âŒ æ— æ³•è¿›è¡Œ Apple å…¬è¯ï¼ˆå…¬è¯è¦æ±‚ Hardened Runtimeï¼‰ |
| `gatekeeperAssess` | `false` | âœ… æ­£ç¡®ï¼ˆè·³è¿‡æœ¬åœ° Gatekeeper æ£€æŸ¥ï¼ŒåŠ å¿«æ„å»ºï¼‰ |

**å¦‚æœæœªæ¥è¦åšå…¬è¯**ï¼Œå¿…é¡»å¯ç”¨ Hardened Runtime å¹¶é…ç½® entitlementsï¼š

> **æ¶æ„è¯„å®¡è­¦å‘Š**ï¼š**ä¸è¦å•ç‹¬å¼€å¯ `hardenedRuntime: true` è€Œä¸åšç­¾åå’Œå…¬è¯ã€‚** Hardened Runtime ä¼šé™åˆ¶ V8 JIT ç¼–è¯‘å’Œ Node.js vm æ¨¡å—ï¼Œå¦‚æœ entitlements é…ç½®ä¸å½“ï¼Œåº”ç”¨å¯èƒ½ç›´æ¥å´©æºƒã€‚åªæœ‰ Hardened Runtime + ä»£ç ç­¾å + Apple å…¬è¯ä¸‰è€…é½å…¨æ‰æœ‰æ„ä¹‰ã€‚å¦‚æœçŸ­æœŸå†…ä¸æ‰“ç®—è´­ä¹° Apple Developer è´¦å·ï¼ˆ$99/å¹´ï¼‰ï¼Œ**ä¿æŒ `hardenedRuntime: false`** æ˜¯æ­£ç¡®çš„é€‰æ‹©ã€‚

```json
{
  "mac": {
    "hardenedRuntime": true,
    "entitlements": "build/entitlements.mac.plist",
    "entitlementsInherit": "build/entitlements.mac.plist"
  }
}
```

```xml
<!-- build/entitlements.mac.plist -->
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "...">
<plist version="1.0">
<dict>
  <key>com.apple.security.cs.allow-jit</key>
  <true/>
  <key>com.apple.security.cs.allow-unsigned-executable-memory</key>
  <true/>
</dict>
</plist>
```

#### 9.1.4 Apple Silicon vs Intel çš„å·®å¼‚

> **è¯„å®¡ä¿®æ­£**ï¼šApple Silicon å’Œ Intel Mac ä½¿ç”¨ç›¸åŒçš„ Gatekeeper æœºåˆ¶ã€‚å®‰å…¨æ£€æŸ¥çš„ä¸¥æ ¼ç¨‹åº¦ä¸»è¦å–å†³äº **macOS ç‰ˆæœ¬**è€ŒéèŠ¯ç‰‡æ¶æ„ã€‚ç”±äº Apple Silicon Mac é€šå¸¸è¿è¡Œè¾ƒæ–°çš„ macOS ç‰ˆæœ¬ï¼ˆBig Sur+ï¼‰ï¼Œç”¨æˆ·å¯èƒ½ä¼šé‡åˆ°æ›´å¤šå®‰å…¨æç¤ºï¼Œä½†è¿™æ˜¯ç‰ˆæœ¬å·®å¼‚è€Œéæ¶æ„å·®å¼‚ã€‚

| ç‰¹æ€§ | Apple Silicon (M1/M2/M3/M4) | Intel Mac |
|-----|:---------------------------:|:---------:|
| Gatekeeper æœºåˆ¶ | ä¸ Intel ç›¸åŒ | ä¸ Apple Silicon ç›¸åŒ |
| å®‰å…¨æ£€æŸ¥ä¸¥æ ¼ç¨‹åº¦ | å–å†³äº macOS ç‰ˆæœ¬ï¼ˆé€šå¸¸è¾ƒæ–°ï¼‰ | å–å†³äº macOS ç‰ˆæœ¬ |
| `xattr -cr` æ•ˆæœ | ä¸ Intel ç›¸åŒï¼ˆå–å†³äº macOS ç‰ˆæœ¬ï¼‰ | ä¸ Apple Silicon ç›¸åŒ |
| Rosetta 2 å…¼å®¹ | âœ… å¯è¿è¡Œ x64 åº”ç”¨ | N/A |

**å½“å‰é¡¹ç›®å·²æ­£ç¡®å¤„ç†**ï¼š`package.json` ä¸­ mac target åŒæ—¶åŒ…å« `x64` å’Œ `arm64`ï¼Œæä¾›äº†åŒæ¶æ„æ”¯æŒã€‚

#### 9.1.5 å„ç‰ˆæœ¬ç”¨æˆ·çš„å®‰è£…ä½“éªŒå¯¹æ¯”

```
macOS Catalina/Big Sur ç”¨æˆ·ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ "æ— æ³•æ‰“å¼€ï¼Œå› ä¸ºæ— æ³•éªŒè¯å¼€å‘è€…"              â”‚
â”‚                                              â”‚
â”‚  [ç§»åˆ°åºŸçº¸ç¯“]  [å–æ¶ˆ]                          â”‚
â”‚                                              â”‚
â”‚  â†’ å³é”®ç‚¹å‡» â†’ æ‰“å¼€ â†’ "ä»è¦æ‰“å¼€" â†’ âœ… æˆåŠŸ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

macOS Monterey ç”¨æˆ·ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ "å·²æŸåï¼Œæ— æ³•æ‰“å¼€ã€‚æ‚¨åº”è¯¥å°†å®ƒç§»åˆ°åºŸçº¸ç¯“"     â”‚
â”‚                                              â”‚
â”‚  [ç§»åˆ°åºŸçº¸ç¯“]  [å–æ¶ˆ]                          â”‚
â”‚                                              â”‚
â”‚  â†’ å³é”®æ‰“å¼€æ— æ•ˆ â†’ å¿…é¡»ç”¨ xattr -cr â†’ âœ… æˆåŠŸ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

macOS Ventura/Sonoma/Sequoia ç”¨æˆ·ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ "å·²æŸåï¼Œæ— æ³•æ‰“å¼€"                         â”‚
â”‚                                              â”‚
â”‚  [ç§»åˆ°åºŸçº¸ç¯“]  [å–æ¶ˆ]                          â”‚
â”‚                                              â”‚
â”‚  â†’ xattr -cr å¯èƒ½ä¸å¤Ÿ                         â”‚
â”‚  â†’ å¯èƒ½éœ€è¦ xattr -d com.apple.provenance     â”‚
â”‚  â†’ Apple Silicon å¯èƒ½éœ€è¦å¤šæ¬¡ç¡®è®¤              â”‚
â”‚  â†’ âœ… æœ€ç»ˆæˆåŠŸ                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 9.2 Windows ç‰ˆæœ¬å·®å¼‚

#### 9.2.1 SmartScreen è¡Œä¸ºæ¼”è¿›

| Windows ç‰ˆæœ¬ | å®‰å…¨æœºåˆ¶ | æœªç­¾ååº”ç”¨æç¤º | ç”¨æˆ·ç»•è¿‡æ–¹å¼ |
|-------------|---------|-------------|------------|
| Windows 10 | SmartScreen | "Windows å·²ä¿æŠ¤ä½ çš„ç”µè„‘" | ç‚¹å‡»"æ›´å¤šä¿¡æ¯" â†’ "ä»è¦è¿è¡Œ" |
| Windows 11 22H2 | SmartScreen å¢å¼º | åŒä¸Š + æ›´é¢‘ç¹è­¦å‘Š | åŒä¸Š |
| **Windows 11 23H2+** | **Smart App Control (SAC)** | **å¯èƒ½å®Œå…¨é˜»æ­¢è¿è¡Œ** | å¿…é¡»åœ¨è®¾ç½®ä¸­ç¦ç”¨ SAC |

#### 9.2.2 Smart App Controlï¼ˆSACï¼‰â€” æ–°å¨èƒ

**è¿™æ˜¯ä¸€ä¸ªä½ å¯èƒ½æ²¡æ³¨æ„åˆ°çš„é‡å¤§é—®é¢˜**ï¼š

Windows 11 22H2 å¼•å…¥äº† **Smart App Control (SAC)**ï¼Œå®ƒæ¯” SmartScreen ä¸¥æ ¼å¾—å¤šï¼š

| å¯¹æ¯”é¡¹ | SmartScreen | Smart App Control |
|-------|------------|-------------------|
| å¼•å…¥ç‰ˆæœ¬ | Windows 8 | Windows 11 22H2 |
| é»˜è®¤çŠ¶æ€ | å§‹ç»ˆå¯ç”¨ | æ–°å®‰è£…å¯é€‰ï¼Œå‡çº§é»˜è®¤å…³é—­ |
| ä¿æŠ¤çº§åˆ« | è­¦å‘Šä½†å…è®¸ç»•è¿‡ | **å¯èƒ½å®Œå…¨é˜»æ­¢æœªç­¾ååº”ç”¨** |
| ç”¨æˆ·æ§åˆ¶ | å¯ç‚¹å‡»"ä»è¦è¿è¡Œ" | å¿…é¡»åœ¨è®¾ç½®ä¸­ç¦ç”¨ SAC |
| ç¦ç”¨åæœ | æ—  | ~~éœ€é‡è£…ç³»ç»Ÿæ‰èƒ½é‡æ–°å¯ç”¨~~ï¼ˆ2025 å¹´ KB5074105 æ›´æ–°åå·²å¯é‡æ–°å¯ç”¨ï¼‰ |

**å¯¹ MD Viewer çš„å½±å“**ï¼š
- å¦‚æœç”¨æˆ·å¯ç”¨äº† SACï¼Œæœªç­¾åçš„ NSIS å®‰è£…åŒ…å¯èƒ½**å®Œå…¨æ— æ³•è¿è¡Œ**
- ç”¨æˆ·çœ‹ä¸åˆ°"ä»è¦è¿è¡Œ"é€‰é¡¹
- å¿…é¡»å¼•å¯¼ç”¨æˆ·åˆ° `è®¾ç½® â†’ éšç§å’Œå®‰å…¨æ€§ â†’ Windows å®‰å…¨ä¸­å¿ƒ â†’ åº”ç”¨å’Œæµè§ˆå™¨æ§åˆ¶` ç¦ç”¨ SAC

#### 9.2.3 Windows on ARM

| ç‰¹æ€§ | å½“å‰çŠ¶æ€ | å»ºè®® |
|-----|---------|------|
| Electron 39 ARM64 æ”¯æŒ | âœ… æ”¯æŒ | å»ºè®®æä¾› ARM64 æ„å»º |
| å½“å‰ package.json é…ç½® | âŒ æœªé…ç½® ARM64 target | æ·»åŠ  `--arm64` æ„å»º |
| x64 æ¨¡æ‹Ÿè¿è¡Œ | âœ… å¯ç”¨ä½†æ€§èƒ½æŸå¤± | åŸç”Ÿ ARM64 æ›´ä½³ |

**å½“å‰ win target é…ç½®**ï¼ˆ`package.json:70-74`ï¼‰ï¼š

```json
"win": {
  "target": ["nsis", "zip"]
  // âŒ æœªæŒ‡å®š archï¼Œé»˜è®¤åªæ„å»ºå½“å‰å¹³å°æ¶æ„
}
```

**å»ºè®®é…ç½®**ï¼š

```json
"win": {
  "target": [
    { "target": "nsis", "arch": ["x64", "arm64"] },
    { "target": "zip", "arch": ["x64", "arm64"] }
  ]
}
```

---

### 9.3 Linux ç‰ˆæœ¬å·®å¼‚

#### 9.3.1 AppImage çš„ FUSE å…¼å®¹æ€§å±æœº

**è¿™æ˜¯ Linux ä¸Šæœ€å¸¸è§çš„å®‰è£…å¤±è´¥åŸå› **ï¼š

| å‘è¡Œç‰ˆ | ç‰ˆæœ¬ | libfuse2 é»˜è®¤å®‰è£… | AppImage å¼€ç®±å³ç”¨ | ç”¨æˆ·çœ‹åˆ°çš„é”™è¯¯ |
|-------|------|:----------------:|:----------------:|-------------|
| Ubuntu 20.04 | LTS | âœ… æ˜¯ | âœ… æ˜¯ | æ—  |
| **Ubuntu 22.04** | LTS | **âŒ å¦** | **âŒ å¦** | `dlopen(): error loading libfuse.so.2` |
| **Ubuntu 24.04** | LTS | **âŒ å¦** | **âŒ å¦** | åŒä¸Š |
| Debian 11 | Stable | âœ… æ˜¯ | âœ… æ˜¯ | æ—  |
| **Debian 12** | Stable | **âŒ å¦** | **âŒ å¦** | åŒä¸Š |
| **Fedora 38+** | - | **âŒ å¦** | **âŒ å¦** | `AppImages require FUSE to run` |
| **Arch Linux** | Rolling | **âŒ å¦** | **âŒ å¦** | åŒä¸Š |

**åŸå› **ï¼šUbuntu 22.04 èµ·é»˜è®¤å®‰è£… FUSE 3ï¼ˆlibfuse3ï¼‰ï¼Œä½† AppImage ä»ç„¶ä¾èµ– FUSE 2ï¼ˆlibfuse2ï¼‰ã€‚è¿™ä¸¤ä¸ªç‰ˆæœ¬ä¸å…¼å®¹ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# Ubuntu/Debian
sudo apt install libfuse2

# Fedora
sudo dnf install fuse

# Arch
sudo pacman -S fuse2

# æˆ–è€…ä¸å®‰è£… FUSEï¼Œç›´æ¥æå–è¿è¡Œï¼ˆæ€§èƒ½ç•¥å·®ï¼‰
./MD-Viewer.AppImage --appimage-extract-and-run
```

#### 9.3.2 Wayland vs X11 å¯¹ Electron çš„å½±å“

| æ¡Œé¢ç¯å¢ƒ | é»˜è®¤æ˜¾ç¤ºåè®® | Electron é»˜è®¤è¡Œä¸º | å·²çŸ¥é—®é¢˜ |
|---------|:----------:|:---------------:|---------|
| GNOME 42+ (Ubuntu 22.04+) | Wayland | ä½¿ç”¨ XWayland | å…¨å±€èœå•ä¸æ”¯æŒ |
| KDE Plasma 6 (2024+) | Wayland | ä½¿ç”¨ XWayland | éƒ¨åˆ†ç¼©æ”¾é—®é¢˜ |
| XFCE | X11 | åŸç”Ÿ X11 | æ—  |

**Electron åœ¨ Wayland ä¸‹çš„é—®é¢˜**ï¼š
- é»˜è®¤é€šè¿‡ XWayland å…¼å®¹å±‚è¿è¡Œï¼ˆéåŸç”Ÿ Waylandï¼‰
- `-webkit-app-region: drag` åœ¨ XWayland ä¸‹å¯èƒ½å¤±æ•ˆ
- çª—å£è£…é¥°å¯èƒ½å¼‚å¸¸
- éœ€è¦ `--ozone-platform=wayland` å‚æ•°æ‰èƒ½åŸç”Ÿ Wayland è¿è¡Œ

#### 9.3.3 inotify watch é™åˆ¶

```
Linux å†…æ ¸é»˜è®¤ fs.inotify.max_user_watches = 8192

å¦‚æœç”¨æˆ·æ‰“å¼€ä¸€ä¸ªåŒ…å«å¤§é‡å­ç›®å½•çš„æ–‡ä»¶å¤¹ï¼Œchokidar å¯èƒ½è§¦åŠæ­¤é™åˆ¶ã€‚

é”™è¯¯ä¿¡æ¯ï¼šENOSPC: System limit for number of file watchers reached

è§£å†³æ–¹æ¡ˆï¼š
echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf
sudo sysctl -p
```

---

### 9.4 Electron 39 æ“ä½œç³»ç»Ÿæ”¯æŒçŸ©é˜µ

| å¹³å° | æœ€ä½æ”¯æŒç‰ˆæœ¬ | æ¨èç‰ˆæœ¬ | åœæ­¢æ”¯æŒé¢„è­¦ |
|-----|:----------:|:------:|-----------|
| macOS | 11 Big Sur | 13 Ventura+ | Chrome 150 è®¡åˆ’ 2026 å¹´ 7 æœˆåœæ­¢æ”¯æŒ Monterey |
| Windows | 10 21H2 | 11 23H2+ | Windows 10 å°†äº 2025 å¹´ 10 æœˆ EOS |
| Linux | glibc 2.28+ | Ubuntu 22.04+ | - |

---

### 9.5 å½“å‰ README å®‰è£…è¯´æ˜çš„æ”¹è¿›å»ºè®®

**å½“å‰è¯´æ˜çš„é—®é¢˜**ï¼š

```markdown
# å½“å‰ README ä¸­çš„è¯´æ˜ï¼ˆä¸å®Œæ•´ï¼‰
xattr -cr /Applications/MD\ Viewer.app
```

**é—®é¢˜**ï¼š
1. åªæä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œä¸”åœ¨ Ventura+ ä¸Šå¯èƒ½å¤±æ•ˆ
2. æ²¡æœ‰åŒºåˆ†ä¸åŒ macOS ç‰ˆæœ¬
3. æ²¡æœ‰æä¾› Windows/Linux çš„å®‰è£…æ³¨æ„äº‹é¡¹
4. æ²¡æœ‰è¯´æ˜ Apple Silicon çš„ç‰¹æ®Šæƒ…å†µ

**å»ºè®®çš„å®Œæ•´å®‰è£…è¯´æ˜**ï¼š

```markdown
## å®‰è£…è¯´æ˜

### macOS

ç”±äºæœ¬é¡¹ç›®ä¸ºå¼€æºè½¯ä»¶ï¼Œæœªç»è¿‡ Apple å…¬è¯ã€‚é¦–æ¬¡æ‰“å¼€æ—¶å¯èƒ½æç¤º"å·²æŸå"æˆ–
"æ— æ³•éªŒè¯å¼€å‘è€…"ï¼Œè¿™æ˜¯æ­£å¸¸çš„å®‰å…¨æç¤ºã€‚

**æ–¹æ³• 1ï¼šå³é”®æ‰“å¼€ï¼ˆmacOS Catalina/Big Sur æ¨èï¼‰**
1. å³é”®ç‚¹å‡»åº”ç”¨å›¾æ ‡
2. é€‰æ‹©"æ‰“å¼€"
3. åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­ç‚¹å‡»"æ‰“å¼€"

**æ–¹æ³• 2ï¼šå‘½ä»¤è¡Œç§»é™¤éš”ç¦»å±æ€§ï¼ˆmacOS Monterey+ æ¨èï¼‰**

> âš ï¸ **å®‰å…¨æç¤º**ï¼š`xattr -cr` å’Œ `xattr -d com.apple.provenance` ä¼šç§»é™¤ macOS çš„å®‰å…¨æ ‡è®°ã€‚**åªåº”å¯¹ä½ å®Œå…¨ä¿¡ä»»çš„æ¥æºä½¿ç”¨è¿™äº›å‘½ä»¤ã€‚** å»ºè®®ä¼˜å…ˆä½¿ç”¨æ–¹æ³• 1 æˆ–æ–¹æ³• 3ã€‚

```bash
# åŸºæœ¬å‘½ä»¤
xattr -cr /Applications/MD\ Viewer.app

# å¦‚æœä¸Šè¿°å‘½ä»¤åä»æç¤º"å·²æŸå"ï¼ˆmacOS Ventura 13+ï¼‰ï¼Œæ‰§è¡Œï¼š
xattr -d com.apple.provenance /Applications/MD\ Viewer.app
```

**æ–¹æ³• 3ï¼šç³»ç»Ÿè®¾ç½®å…è®¸ï¼ˆé€šç”¨ï¼‰**
1. æ‰“å¼€"ç³»ç»Ÿè®¾ç½®" â†’ "éšç§ä¸å®‰å…¨æ€§"
2. åœ¨"å®‰å…¨æ€§"éƒ¨åˆ†æ‰¾åˆ°è¢«é˜»æ­¢çš„åº”ç”¨
3. ç‚¹å‡»"ä»è¦æ‰“å¼€"

### Windows

é¦–æ¬¡è¿è¡Œå®‰è£…ç¨‹åºæ—¶ï¼ŒSmartScreen å¯èƒ½æ˜¾ç¤º"Windows å·²ä¿æŠ¤ä½ çš„ç”µè„‘"ï¼š
1. ç‚¹å‡»"æ›´å¤šä¿¡æ¯"
2. ç‚¹å‡»"ä»è¦è¿è¡Œ"

> âš ï¸ Windows 11 ç”¨æˆ·ï¼šå¦‚æœå¯ç”¨äº† Smart App Controlï¼ˆSACï¼‰ï¼Œ
> åº”ç”¨å¯èƒ½è¢«é˜»æ­¢å®‰è£…ã€‚å¯ä»¥åœ¨"Windows å®‰å…¨ä¸­å¿ƒ â†’ åº”ç”¨å’Œæµè§ˆå™¨æ§åˆ¶"
> ä¸­æŸ¥çœ‹è¢«é˜»æ­¢çš„åº”ç”¨å¹¶é€‰æ‹©"ä»è¦è¿è¡Œ"ã€‚
> å¦‚éœ€ä¸´æ—¶å…³é—­ SACï¼Œå®‰è£…å®Œæˆåå¯é‡æ–°å¯ç”¨ï¼ˆ2025 å¹´ KB5074105 æ›´æ–°åæ”¯æŒï¼‰ã€‚

### Linux

**AppImage ç”¨æˆ·**ï¼ˆUbuntu 22.04+/Debian 12+/Fedora 38+ï¼‰ï¼š
```bash
# éœ€è¦å…ˆå®‰è£… libfuse2
sudo apt install libfuse2    # Ubuntu/Debian
sudo dnf install fuse         # Fedora
sudo pacman -S fuse2          # Arch

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x MD-Viewer.AppImage
./MD-Viewer.AppImage

# å¦‚æœä¸æƒ³å®‰è£… FUSEï¼Œå¯ä»¥ç”¨æå–æ¨¡å¼è¿è¡Œï¼š
./MD-Viewer.AppImage --appimage-extract-and-run
```

**.deb ç”¨æˆ·**ï¼š
```bash
sudo dpkg -i md-viewer_*.deb
sudo apt-get install -f  # å®‰è£…ä¾èµ–
```
```

---

### 9.6 OS ç‰ˆæœ¬é—®é¢˜æ±‡æ€»è¡¨

| # | é—®é¢˜ | å½±å“å¹³å°/ç‰ˆæœ¬ | ä¼˜å…ˆçº§ | ç±»å‹ |
|---|------|-------------|:------:|------|
| V1 | `xattr -cr` åœ¨ Ventura+ å¯èƒ½ä¸å¤Ÿ | macOS 13+ | ğŸ”´ P0 | æ–‡æ¡£ |
| V2 | `hardenedRuntime: false` é˜»æ­¢å…¬è¯ï¼ˆä½†ä¸å»ºè®®å•ç‹¬å¼€å¯ï¼‰ | macOS å…¨ç‰ˆæœ¬ | ğŸ”µ P2 | é…ç½® |
| V3 | Smart App Control å¯èƒ½å®Œå…¨é˜»æ­¢å®‰è£… | Windows 11 23H2+ | âš ï¸ P1 | æ–‡æ¡£ |
| V4 | AppImage ç¼ºå°‘ libfuse2 æ— æ³•è¿è¡Œ | Ubuntu 22.04+/Debian 12+ | ğŸ”´ P0 | æ–‡æ¡£ |
| V5 | Windows ARM64 æœªæä¾›åŸç”Ÿæ„å»º | Windows on ARM | ğŸ”µ P2 | é…ç½® |
| V6 | Wayland ä¸‹æ‹–æ‹½åŒºåŸŸå¯èƒ½å¤±æ•ˆ | Linux GNOME 42+/KDE 6 | ğŸ”µ P2 | ä»£ç  |
| V7 | inotify watch é™åˆ¶ | Linux å…¨ç‰ˆæœ¬ | ğŸ”µ P2 | æ–‡æ¡£ |

---

## é™„å½•ï¼šå¹³å°æ£€æµ‹é€ŸæŸ¥è¡¨

```typescript
// ä¸»è¿›ç¨‹ï¼ˆNode.jsï¼‰
process.platform === 'darwin'   // macOS
process.platform === 'win32'    // Windows
process.platform === 'linux'    // Linux

// æ¸²æŸ“è¿›ç¨‹ â€” æ¨èæ–¹å¼ï¼šé€šè¿‡ preload æš´éœ²ï¼ˆå®‰å…¨ï¼Œä¸ä¾èµ–åºŸå¼ƒ APIï¼‰
// preload.ts
contextBridge.exposeInMainWorld('api', {
  platform: process.platform  // é™æ€å€¼ï¼Œæ—  IPC å¼€é”€
})
// renderer
const platform = window.api.platform

// æ¸²æŸ“è¿›ç¨‹ â€” ä¸æ¨èï¼šnavigator.platformï¼ˆå·²åºŸå¼ƒï¼‰
navigator.platform.includes('Mac')     // macOS
navigator.platform.includes('Win')     // Windows
navigator.platform.includes('Linux')   // Linux
```

---

> **æ–‡æ¡£ç”Ÿæˆæ—¥æœŸ**ï¼š2026-02-07
> **åˆ†æåŸºäºç‰ˆæœ¬**ï¼šMD Viewer v1.4.7
> **æ–‡æ¡£æ€§è´¨**ï¼šåªè¯»åˆ†ææŠ¥å‘Šï¼Œä¸åŒ…å«ä»£ç ä¿®æ”¹
> **è¯„å®¡çŠ¶æ€**ï¼šå·²é€šè¿‡å››ç»´è¯„å®¡ï¼ˆä»£ç å‡†ç¡®æ€§ / æ–‡æ¡£è´¨é‡ / æ¶æ„åˆç†æ€§ / å®‰å…¨å‡†ç¡®æ€§ï¼‰
